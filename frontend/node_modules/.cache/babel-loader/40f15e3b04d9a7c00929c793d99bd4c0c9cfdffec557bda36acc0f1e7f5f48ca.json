{"ast":null,"code":"var _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$(),\n  _s4 = $RefreshSig$();\nimport { useEffect, useState } from 'react';\nimport { GoogleBooksService } from '../app/services/services/GoogleBooksService';\nexport function useGoogleBooks(query = 'bestsellers', maxResults = 20, startIndex = 0) {\n  _s();\n  const [data, setData] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [totalItems, setTotalItems] = useState(0);\n  useEffect(() => {\n    setLoading(true);\n    setError(null);\n    const fetchBooks = async () => {\n      try {\n        let response;\n        if (query === 'trending') {\n          response = await GoogleBooksService.getTrendingBooks(maxResults);\n        } else if (query === 'popular') {\n          response = await GoogleBooksService.getPopularBooks('fiction', maxResults);\n        } else if (query === 'bestsellers') {\n          // Search for popular fiction books from recent years\n          response = await GoogleBooksService.searchBooks('popular fiction 2024', maxResults, startIndex);\n        } else {\n          response = await GoogleBooksService.searchBooks(query, maxResults, startIndex);\n        }\n        const convertedBooks = (response.items || []).map(book => GoogleBooksService.convertGoogleBookToBookFormat(book));\n\n        // Filter out books with very low rating counts to avoid showing fake-looking ratings\n        // But be more lenient to ensure we show books\n        const filteredBooks = convertedBooks.filter(book => book.ratingsCount === 0 || book.ratingsCount >= 5);\n        setData(filteredBooks);\n        setTotalItems(response.totalItems);\n      } catch (err) {\n        setError(err);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchBooks();\n  }, [query, maxResults, startIndex]);\n  return {\n    data,\n    loading,\n    error,\n    totalItems\n  };\n}\n_s(useGoogleBooks, \"Y0Kl6AhtjSc0CFBvrY8PXFAe5bU=\");\nexport function useTrendingBooks(maxResults = 5) {\n  _s2();\n  return useGoogleBooks('trending', maxResults);\n}\n_s2(useTrendingBooks, \"ZdwRynVIoSY1u/fnNuXOJkd+Qrw=\", false, function () {\n  return [useGoogleBooks];\n});\nexport function usePopularBooks(maxResults = 10) {\n  _s3();\n  return useGoogleBooks('popular', maxResults);\n}\n_s3(usePopularBooks, \"ZdwRynVIoSY1u/fnNuXOJkd+Qrw=\", false, function () {\n  return [useGoogleBooks];\n});\nexport function useBestsellers(maxResults = 20) {\n  _s4();\n  return useGoogleBooks('bestsellers', maxResults);\n}\n_s4(useBestsellers, \"ZdwRynVIoSY1u/fnNuXOJkd+Qrw=\", false, function () {\n  return [useGoogleBooks];\n});","map":{"version":3,"names":["useEffect","useState","GoogleBooksService","useGoogleBooks","query","maxResults","startIndex","_s","data","setData","loading","setLoading","error","setError","totalItems","setTotalItems","fetchBooks","response","getTrendingBooks","getPopularBooks","searchBooks","convertedBooks","items","map","book","convertGoogleBookToBookFormat","filteredBooks","filter","ratingsCount","err","useTrendingBooks","_s2","usePopularBooks","_s3","useBestsellers","_s4"],"sources":["/Users/cluckbucks/projects/booknexus-social/frontend/src/hooks/useGoogleBooks.ts"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { GoogleBooksService, GoogleBooksResponse } from '../app/services/services/GoogleBooksService';\n\nexport interface GoogleBook {\n  id: string;\n  title: string;\n  authorName: string;\n  isbn: string;\n  synopsis: string;\n  cover: string | null;\n  publishedDate?: string;\n  pageCount?: number;\n  categories?: string[];\n  averageRating: number;\n  ratingsCount: number;\n  isGoogleBook: boolean;\n  googleBookId: string;\n}\n\nexport function useGoogleBooks(\n  query: string = 'bestsellers',\n  maxResults: number = 20,\n  startIndex: number = 0\n) {\n  const [data, setData] = useState<GoogleBook[]>([]);\n  const [loading, setLoading] = useState<boolean>(true);\n  const [error, setError] = useState<any>(null);\n  const [totalItems, setTotalItems] = useState<number>(0);\n\n  useEffect(() => {\n    setLoading(true);\n    setError(null);\n    \n    const fetchBooks = async () => {\n      try {\n        let response: GoogleBooksResponse;\n        \n        if (query === 'trending') {\n          response = await GoogleBooksService.getTrendingBooks(maxResults);\n        } else if (query === 'popular') {\n          response = await GoogleBooksService.getPopularBooks('fiction', maxResults);\n        } else if (query === 'bestsellers') {\n          // Search for popular fiction books from recent years\n          response = await GoogleBooksService.searchBooks('popular fiction 2024', maxResults, startIndex);\n        } else {\n          response = await GoogleBooksService.searchBooks(query, maxResults, startIndex);\n        }\n\n        const convertedBooks = (response.items || []).map(book => \n          GoogleBooksService.convertGoogleBookToBookFormat(book)\n        );\n\n        // Filter out books with very low rating counts to avoid showing fake-looking ratings\n        // But be more lenient to ensure we show books\n        const filteredBooks = convertedBooks.filter(book => \n          book.ratingsCount === 0 || book.ratingsCount >= 5\n        );\n\n        setData(filteredBooks);\n        setTotalItems(response.totalItems);\n      } catch (err) {\n        setError(err);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchBooks();\n  }, [query, maxResults, startIndex]);\n\n  return { data, loading, error, totalItems };\n}\n\nexport function useTrendingBooks(maxResults: number = 5) {\n  return useGoogleBooks('trending', maxResults);\n}\n\nexport function usePopularBooks(maxResults: number = 10) {\n  return useGoogleBooks('popular', maxResults);\n}\n\nexport function useBestsellers(maxResults: number = 20) {\n  return useGoogleBooks('bestsellers', maxResults);\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}