{"ast":null,"code":"export class GoogleBooksService {\n  // Google Books API doesn't require an API key for basic usage\n\n  /**\n   * Search for books using Google Books API\n   */\n  static async searchBooks(query, maxResults = 20, startIndex = 0) {\n    const queryParams = new URLSearchParams({\n      q: query,\n      maxResults: maxResults.toString(),\n      startIndex: startIndex.toString(),\n      key: this.API_KEY\n    });\n\n    // Use fetch directly for Google Books API to avoid CORS issues\n    const response = await fetch(`${this.BASE_URL}/volumes?${queryParams.toString()}`);\n    if (!response.ok) {\n      throw new Error(`Google Books API error: ${response.status}`);\n    }\n    const result = await response.json();\n    return result;\n  }\n\n  /**\n   * Get popular books by category\n   */\n  static async getPopularBooks(category = 'fiction', maxResults = 20) {\n    const query = `subject:${category}`;\n    return this.searchBooks(query, maxResults);\n  }\n\n  /**\n   * Get trending books (recently published)\n   */\n  static async getTrendingBooks(maxResults = 20) {\n    const currentYear = new Date().getFullYear();\n    const query = `publishedDate:${currentYear} fiction`;\n    return this.searchBooks(query, maxResults);\n  }\n\n  /**\n   * Get book details by Google Books ID\n   */\n  static async getBookById(bookId) {\n    // Use fetch directly for Google Books API to avoid CORS issues\n    const response = await fetch(`${this.BASE_URL}/volumes/${bookId}`);\n    if (!response.ok) {\n      throw new Error(`Google Books API error: ${response.status}`);\n    }\n    const result = await response.json();\n    return result;\n  }\n\n  /**\n   * Convert Google Book to our Book format\n   */\n  static convertGoogleBookToBookFormat(googleBook) {\n    var _volumeInfo$industryI, _volumeInfo$industryI2, _volumeInfo$industryI3, _volumeInfo$industryI4, _volumeInfo$authors, _volumeInfo$imageLink;\n    const volumeInfo = googleBook.volumeInfo;\n    const isbn = ((_volumeInfo$industryI = volumeInfo.industryIdentifiers) === null || _volumeInfo$industryI === void 0 ? void 0 : (_volumeInfo$industryI2 = _volumeInfo$industryI.find(id => id.type === 'ISBN_13')) === null || _volumeInfo$industryI2 === void 0 ? void 0 : _volumeInfo$industryI2.identifier) || ((_volumeInfo$industryI3 = volumeInfo.industryIdentifiers) === null || _volumeInfo$industryI3 === void 0 ? void 0 : (_volumeInfo$industryI4 = _volumeInfo$industryI3.find(id => id.type === 'ISBN_10')) === null || _volumeInfo$industryI4 === void 0 ? void 0 : _volumeInfo$industryI4.identifier) || '';\n    return {\n      id: googleBook.id,\n      title: volumeInfo.title || 'Unknown Title',\n      authorName: ((_volumeInfo$authors = volumeInfo.authors) === null || _volumeInfo$authors === void 0 ? void 0 : _volumeInfo$authors.join(', ')) || 'Unknown Author',\n      isbn: isbn,\n      synopsis: volumeInfo.description || 'No description available.',\n      cover: ((_volumeInfo$imageLink = volumeInfo.imageLinks) === null || _volumeInfo$imageLink === void 0 ? void 0 : _volumeInfo$imageLink.thumbnail) || null,\n      publishedDate: volumeInfo.publishedDate,\n      pageCount: volumeInfo.pageCount,\n      categories: volumeInfo.categories,\n      averageRating: volumeInfo.averageRating || 0,\n      ratingsCount: volumeInfo.ratingsCount || 0,\n      isGoogleBook: true,\n      googleBookId: googleBook.id\n    };\n  }\n}\nGoogleBooksService.BASE_URL = 'https://www.googleapis.com/books/v1';\nGoogleBooksService.API_KEY = '';","map":{"version":3,"names":["GoogleBooksService","searchBooks","query","maxResults","startIndex","queryParams","URLSearchParams","q","toString","key","API_KEY","response","fetch","BASE_URL","ok","Error","status","result","json","getPopularBooks","category","getTrendingBooks","currentYear","Date","getFullYear","getBookById","bookId","convertGoogleBookToBookFormat","googleBook","_volumeInfo$industryI","_volumeInfo$industryI2","_volumeInfo$industryI3","_volumeInfo$industryI4","_volumeInfo$authors","_volumeInfo$imageLink","volumeInfo","isbn","industryIdentifiers","find","id","type","identifier","title","authorName","authors","join","synopsis","description","cover","imageLinks","thumbnail","publishedDate","pageCount","categories","averageRating","ratingsCount","isGoogleBook","googleBookId"],"sources":["/Users/cluckbucks/projects/booknexus-social/frontend/src/app/services/services/GoogleBooksService.ts"],"sourcesContent":["import { request as __request } from '../core/request';\n\nexport interface GoogleBookVolumeInfo {\n  title: string;\n  authors?: string[];\n  description?: string;\n  imageLinks?: {\n    thumbnail?: string;\n    smallThumbnail?: string;\n  };\n  publishedDate?: string;\n  pageCount?: number;\n  categories?: string[];\n  averageRating?: number;\n  ratingsCount?: number;\n  industryIdentifiers?: Array<{\n    type: string;\n    identifier: string;\n  }>;\n}\n\nexport interface GoogleBookItem {\n  id: string;\n  volumeInfo: GoogleBookVolumeInfo;\n}\n\nexport interface GoogleBooksResponse {\n  items?: GoogleBookItem[];\n  totalItems: number;\n}\n\nexport class GoogleBooksService {\n  private static readonly BASE_URL = 'https://www.googleapis.com/books/v1';\n  private static readonly API_KEY = ''; // Google Books API doesn't require an API key for basic usage\n\n  /**\n   * Search for books using Google Books API\n   */\n  public static async searchBooks(\n    query: string,\n    maxResults: number = 20,\n    startIndex: number = 0\n  ): Promise<GoogleBooksResponse> {\n    const queryParams = new URLSearchParams({\n      q: query,\n      maxResults: maxResults.toString(),\n      startIndex: startIndex.toString(),\n      key: this.API_KEY\n    });\n\n    // Use fetch directly for Google Books API to avoid CORS issues\n    const response = await fetch(`${this.BASE_URL}/volumes?${queryParams.toString()}`);\n    \n    if (!response.ok) {\n      throw new Error(`Google Books API error: ${response.status}`);\n    }\n\n    const result = await response.json();\n    return result;\n  }\n\n  /**\n   * Get popular books by category\n   */\n  public static async getPopularBooks(\n    category: string = 'fiction',\n    maxResults: number = 20\n  ): Promise<GoogleBooksResponse> {\n    const query = `subject:${category}`;\n    return this.searchBooks(query, maxResults);\n  }\n\n  /**\n   * Get trending books (recently published)\n   */\n  public static async getTrendingBooks(\n    maxResults: number = 20\n  ): Promise<GoogleBooksResponse> {\n    const currentYear = new Date().getFullYear();\n    const query = `publishedDate:${currentYear} fiction`;\n    return this.searchBooks(query, maxResults);\n  }\n\n  /**\n   * Get book details by Google Books ID\n   */\n  public static async getBookById(bookId: string): Promise<GoogleBookItem> {\n    // Use fetch directly for Google Books API to avoid CORS issues\n    const response = await fetch(`${this.BASE_URL}/volumes/${bookId}`);\n    \n    if (!response.ok) {\n      throw new Error(`Google Books API error: ${response.status}`);\n    }\n\n    const result = await response.json();\n    return result;\n  }\n\n  /**\n   * Convert Google Book to our Book format\n   */\n  public static convertGoogleBookToBookFormat(googleBook: GoogleBookItem): any {\n    const volumeInfo = googleBook.volumeInfo;\n    const isbn = volumeInfo.industryIdentifiers?.find(id => id.type === 'ISBN_13')?.identifier ||\n                 volumeInfo.industryIdentifiers?.find(id => id.type === 'ISBN_10')?.identifier ||\n                 '';\n\n    return {\n      id: googleBook.id,\n      title: volumeInfo.title || 'Unknown Title',\n      authorName: volumeInfo.authors?.join(', ') || 'Unknown Author',\n      isbn: isbn,\n      synopsis: volumeInfo.description || 'No description available.',\n      cover: volumeInfo.imageLinks?.thumbnail || null,\n      publishedDate: volumeInfo.publishedDate,\n      pageCount: volumeInfo.pageCount,\n      categories: volumeInfo.categories,\n      averageRating: volumeInfo.averageRating || 0,\n      ratingsCount: volumeInfo.ratingsCount || 0,\n      isGoogleBook: true,\n      googleBookId: googleBook.id\n    };\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}