{"ast":null,"code":"import{Alert,Box,Button,Checkbox,Container,FormControlLabel,TextField,Typography}from'@mui/material';import React,{useState}from'react';import{BookService}from'../app/services/services/BookService';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AddBookPage=()=>{const[title,setTitle]=useState('');const[authorName,setAuthorName]=useState('');const[isbn,setIsbn]=useState('');const[synopsis,setSynopsis]=useState('');const[shareable,setShareable]=useState(false);const[cover,setCover]=useState(null);const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const[success,setSuccess]=useState(false);const handleSubmit=async e=>{e.preventDefault();setError(null);setSuccess(false);setLoading(true);try{const bookId=await BookService.saveBook({title,authorName,isbn,synopsis,shareable});if(cover&&bookId){const formData=new FormData();formData.append('file',cover);await BookService.uploadBookCoverPicture(bookId,{file:cover});}setSuccess(true);setTitle('');setAuthorName('');setIsbn('');setSynopsis('');setShareable(false);setCover(null);}catch(err){var _err$body;setError((err===null||err===void 0?void 0:(_err$body=err.body)===null||_err$body===void 0?void 0:_err$body.message)||'Failed to add book');}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(Container,{maxWidth:\"sm\",sx:{mt:4},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",gutterBottom:true,children:\"Add to Library\"}),error&&/*#__PURE__*/_jsx(Alert,{severity:\"error\",sx:{mb:2},children:error}),success&&/*#__PURE__*/_jsx(Alert,{severity:\"success\",sx:{mb:2},children:\"Book added successfully!\"}),/*#__PURE__*/_jsxs(Box,{component:\"form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(TextField,{label:\"Title\",value:title,onChange:e=>setTitle(e.target.value),fullWidth:true,margin:\"normal\",required:true}),/*#__PURE__*/_jsx(TextField,{label:\"Author Name\",value:authorName,onChange:e=>setAuthorName(e.target.value),fullWidth:true,margin:\"normal\",required:true}),/*#__PURE__*/_jsx(TextField,{label:\"ISBN\",value:isbn,onChange:e=>setIsbn(e.target.value),fullWidth:true,margin:\"normal\",required:true}),/*#__PURE__*/_jsx(TextField,{label:\"Synopsis\",value:synopsis,onChange:e=>setSynopsis(e.target.value),fullWidth:true,margin:\"normal\",multiline:true,rows:3,required:true,inputProps:{maxLength:255}}),/*#__PURE__*/_jsxs(Typography,{variant:\"caption\",color:synopsis.length>255?'error':'text.secondary',sx:{mt:0.5,display:'block'},children:[synopsis.length,\"/255 characters\"]}),/*#__PURE__*/_jsx(FormControlLabel,{control:/*#__PURE__*/_jsx(Checkbox,{checked:shareable,onChange:e=>setShareable(e.target.checked)}),label:\"Shareable\"}),/*#__PURE__*/_jsxs(Button,{variant:\"contained\",component:\"label\",sx:{mt:2},children:[\"Upload Cover\",/*#__PURE__*/_jsx(\"input\",{type:\"file\",hidden:true,accept:\"image/*\",onChange:e=>{var _e$target$files;return setCover(((_e$target$files=e.target.files)===null||_e$target$files===void 0?void 0:_e$target$files[0])||null);}})]}),cover&&/*#__PURE__*/_jsx(Typography,{variant:\"body2\",sx:{mt:1},children:cover.name}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",color:\"primary\",fullWidth:true,disabled:loading||synopsis.length>255,sx:{mt:3},children:loading?'Adding...':'Add Book'})]})]});};export default AddBookPage;","map":{"version":3,"names":["Alert","Box","Button","Checkbox","Container","FormControlLabel","TextField","Typography","React","useState","BookService","jsx","_jsx","jsxs","_jsxs","AddBookPage","title","setTitle","authorName","setAuthorName","isbn","setIsbn","synopsis","setSynopsis","shareable","setShareable","cover","setCover","loading","setLoading","error","setError","success","setSuccess","handleSubmit","e","preventDefault","bookId","saveBook","formData","FormData","append","uploadBookCoverPicture","file","err","_err$body","body","message","maxWidth","sx","mt","children","variant","gutterBottom","severity","mb","component","onSubmit","label","value","onChange","target","fullWidth","margin","required","multiline","rows","inputProps","maxLength","color","length","display","control","checked","type","hidden","accept","_e$target$files","files","name","disabled"],"sources":["/Users/cluckbucks/projects/booknexus-social/frontend/src/pages/AddBookPage.tsx"],"sourcesContent":["import { Alert, Box, Button, Checkbox, Container, FormControlLabel, TextField, Typography } from '@mui/material';\nimport React, { useState } from 'react';\nimport { BookService } from '../app/services/services/BookService';\n\nconst AddBookPage: React.FC = () => {\n  const [title, setTitle] = useState('');\n  const [authorName, setAuthorName] = useState('');\n  const [isbn, setIsbn] = useState('');\n  const [synopsis, setSynopsis] = useState('');\n  const [shareable, setShareable] = useState(false);\n  const [cover, setCover] = useState<File | null>(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [success, setSuccess] = useState(false);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError(null);\n    setSuccess(false);\n    setLoading(true);\n    try {\n      const bookId = await BookService.saveBook({ title, authorName, isbn, synopsis, shareable });\n      if (cover && bookId) {\n        const formData = new FormData();\n        formData.append('file', cover);\n        await BookService.uploadBookCoverPicture(bookId, { file: cover });\n      }\n      setSuccess(true);\n      setTitle(''); setAuthorName(''); setIsbn(''); setSynopsis(''); setShareable(false); setCover(null);\n    } catch (err: any) {\n      setError(err?.body?.message || 'Failed to add book');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <Container maxWidth=\"sm\" sx={{ mt: 4 }}>\n      <Typography variant=\"h4\" gutterBottom>Add to Library</Typography>\n      {error && <Alert severity=\"error\" sx={{ mb: 2 }}>{error}</Alert>}\n      {success && <Alert severity=\"success\" sx={{ mb: 2 }}>Book added successfully!</Alert>}\n      <Box component=\"form\" onSubmit={handleSubmit}>\n        <TextField label=\"Title\" value={title} onChange={e => setTitle(e.target.value)} fullWidth margin=\"normal\" required />\n        <TextField label=\"Author Name\" value={authorName} onChange={e => setAuthorName(e.target.value)} fullWidth margin=\"normal\" required />\n        <TextField label=\"ISBN\" value={isbn} onChange={e => setIsbn(e.target.value)} fullWidth margin=\"normal\" required />\n        <TextField label=\"Synopsis\" value={synopsis} onChange={e => setSynopsis(e.target.value)} fullWidth margin=\"normal\" multiline rows={3} required inputProps={{ maxLength: 255 }} />\n        <Typography variant=\"caption\" color={synopsis.length > 255 ? 'error' : 'text.secondary'} sx={{ mt: 0.5, display: 'block' }}>\n          {synopsis.length}/255 characters\n        </Typography>\n        <FormControlLabel control={<Checkbox checked={shareable} onChange={e => setShareable(e.target.checked)} />} label=\"Shareable\" />\n        <Button variant=\"contained\" component=\"label\" sx={{ mt: 2 }}>\n          Upload Cover\n          <input type=\"file\" hidden accept=\"image/*\" onChange={e => setCover(e.target.files?.[0] || null)} />\n        </Button>\n        {cover && <Typography variant=\"body2\" sx={{ mt: 1 }}>{cover.name}</Typography>}\n        <Button type=\"submit\" variant=\"contained\" color=\"primary\" fullWidth disabled={loading || synopsis.length > 255} sx={{ mt: 3 }}>\n          {loading ? 'Adding...' : 'Add Book'}\n        </Button>\n      </Box>\n    </Container>\n  );\n};\n\nexport default AddBookPage; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}