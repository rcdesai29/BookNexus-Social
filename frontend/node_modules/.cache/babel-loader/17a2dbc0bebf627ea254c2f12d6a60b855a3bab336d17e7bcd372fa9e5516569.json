{"ast":null,"code":"import{Alert,Box,Button,Container,TextField,Typography}from'@mui/material';import React,{useState}from'react';import{Link,useNavigate}from'react-router-dom';import{AuthenticationService}from'../app/services/services/AuthenticationService';import{tokenService}from'../services/tokenService';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const LoginPage=()=>{const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const[validationErrors,setValidationErrors]=useState([]);const[success,setSuccess]=useState(false);const navigate=useNavigate();const handleSubmit=async e=>{e.preventDefault();setError(null);setSuccess(false);const errors=[];if(!email)errors.push('Email is mandatory');if(!password)errors.push('Password is mandatory');if(password&&password.length<8)errors.push('Password should be at least 8 characters long');setValidationErrors(errors);if(errors.length>0)return;setLoading(true);try{const response=await AuthenticationService.authenticate({email,password});if(response&&response.token){tokenService.setToken(response.token);setSuccess(true);setTimeout(()=>navigate('/books'),1000);}else{setError('No token received from server');}}catch(err){var _err$body;setError((err===null||err===void 0?void 0:(_err$body=err.body)===null||_err$body===void 0?void 0:_err$body.message)||'Login failed');}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(Container,{maxWidth:\"xs\",sx:{mt:8},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",gutterBottom:true,children:\"Login\"}),validationErrors.length>0&&/*#__PURE__*/_jsx(Alert,{severity:\"error\",sx:{mb:2},children:/*#__PURE__*/_jsx(\"ul\",{style:{margin:0,paddingLeft:20},children:validationErrors.map((err,idx)=>/*#__PURE__*/_jsx(\"li\",{children:err},idx))})}),error&&/*#__PURE__*/_jsx(Alert,{severity:\"error\",sx:{mb:2},children:error}),success&&/*#__PURE__*/_jsx(Alert,{severity:\"success\",sx:{mb:2},children:\"Login successful!\"}),/*#__PURE__*/_jsxs(Box,{component:\"form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(TextField,{label:\"Email\",type:\"email\",value:email,onChange:e=>setEmail(e.target.value),fullWidth:true,margin:\"normal\",required:true}),/*#__PURE__*/_jsx(TextField,{label:\"Password\",type:\"password\",value:password,onChange:e=>setPassword(e.target.value),fullWidth:true,margin:\"normal\",required:true}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",color:\"primary\",fullWidth:true,disabled:loading,sx:{mt:2},children:loading?'Logging in...':'Login'})]}),/*#__PURE__*/_jsxs(Box,{sx:{mt:2},children:[\"Don't have an account? \",/*#__PURE__*/_jsx(Link,{to:\"/register\",children:\"Register here\"})]})]});};export default LoginPage;","map":{"version":3,"names":["Alert","Box","Button","Container","TextField","Typography","React","useState","Link","useNavigate","AuthenticationService","tokenService","jsx","_jsx","jsxs","_jsxs","LoginPage","email","setEmail","password","setPassword","loading","setLoading","error","setError","validationErrors","setValidationErrors","success","setSuccess","navigate","handleSubmit","e","preventDefault","errors","push","length","response","authenticate","token","setToken","setTimeout","err","_err$body","body","message","maxWidth","sx","mt","children","variant","gutterBottom","severity","mb","style","margin","paddingLeft","map","idx","component","onSubmit","label","type","value","onChange","target","fullWidth","required","color","disabled","to"],"sources":["/Users/rahildesai/Projects/BookNexus/frontend/src/pages/LoginPage.tsx"],"sourcesContent":["import { Alert, Box, Button, Container, TextField, Typography } from '@mui/material';\nimport React, { useState } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { AuthenticationService } from '../app/services/services/AuthenticationService';\nimport { tokenService } from '../services/tokenService';\n\nconst LoginPage: React.FC = () => {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [validationErrors, setValidationErrors] = useState<string[]>([]);\n  const [success, setSuccess] = useState(false);\n  const navigate = useNavigate();\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError(null);\n    setSuccess(false);\n\n    const errors: string[] = [];\n    if (!email) errors.push('Email is mandatory');\n    if (!password) errors.push('Password is mandatory');\n    if (password && password.length < 8) errors.push('Password should be at least 8 characters long');\n    setValidationErrors(errors);\n    if (errors.length > 0) return;\n\n    setLoading(true);\n    try {\n      const response = await AuthenticationService.authenticate({ email, password });\n      if (response && response.token) {\n        tokenService.setToken(response.token);\n        setSuccess(true);\n        setTimeout(() => navigate('/books'), 1000);\n      } else {\n        setError('No token received from server');\n      }\n    } catch (err: any) {\n      setError(err?.body?.message || 'Login failed');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <Container maxWidth=\"xs\" sx={{ mt: 8 }}>\n      <Typography variant=\"h4\" gutterBottom>Login</Typography>\n      {validationErrors.length > 0 && (\n        <Alert severity=\"error\" sx={{ mb: 2 }}>\n          <ul style={{ margin: 0, paddingLeft: 20 }}>\n            {validationErrors.map((err, idx) => <li key={idx}>{err}</li>)}\n          </ul>\n        </Alert>\n      )}\n      {error && <Alert severity=\"error\" sx={{ mb: 2 }}>{error}</Alert>}\n      {success && <Alert severity=\"success\" sx={{ mb: 2 }}>Login successful!</Alert>}\n      <Box component=\"form\" onSubmit={handleSubmit}>\n        <TextField\n          label=\"Email\"\n          type=\"email\"\n          value={email}\n          onChange={e => setEmail(e.target.value)}\n          fullWidth\n          margin=\"normal\"\n          required\n        />\n        <TextField\n          label=\"Password\"\n          type=\"password\"\n          value={password}\n          onChange={e => setPassword(e.target.value)}\n          fullWidth\n          margin=\"normal\"\n          required\n        />\n        <Button type=\"submit\" variant=\"contained\" color=\"primary\" fullWidth disabled={loading} sx={{ mt: 2 }}>\n          {loading ? 'Logging in...' : 'Login'}\n        </Button>\n      </Box>\n      <Box sx={{ mt: 2 }}>\n        Don&apos;t have an account? <Link to=\"/register\">Register here</Link>\n      </Box>\n    </Container>\n  );\n};\n\nexport default LoginPage; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}