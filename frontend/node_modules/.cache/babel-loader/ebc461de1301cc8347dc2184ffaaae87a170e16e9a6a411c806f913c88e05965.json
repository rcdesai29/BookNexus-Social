{"ast":null,"code":"var _jsxFileName = \"/Users/cluckbucks/projects/booknexus-social/frontend/src/components/UnifiedBookDetailsModal.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Close as CloseIcon, Star as StarIcon, StarBorder as StarBorderIcon, StarHalf as StarHalfIcon, Send as SendIcon, MenuBook as MenuBookIcon } from '@mui/icons-material';\nimport { GoogleBookFeedbackService } from '../app/services/services/GoogleBookFeedbackService';\nimport { UserBookListService } from '../app/services/services/UserBookListService';\nimport { useAuth } from '../hooks/useAuth';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst UnifiedBookDetailsModal = ({\n  book,\n  isOpen,\n  onClose,\n  context = 'discovery',\n  existingUserRating,\n  existingUserReview,\n  userBookListData,\n  onBookMoved\n}) => {\n  _s();\n  const {\n    isLoggedIn\n  } = useAuth();\n  const [rating, setRating] = useState(0);\n  const [review, setReview] = useState('');\n  const [submitting, setSubmitting] = useState(false);\n  const [error, setError] = useState(null);\n  const [success, setSuccess] = useState(false);\n  const [showReviewForm, setShowReviewForm] = useState(false);\n  const [existingFeedback, setExistingFeedback] = useState(null);\n  const [progress, setProgress] = useState(0);\n  const [isUpdatingProgress, setIsUpdatingProgress] = useState(false);\n  const [progressError, setProgressError] = useState(null);\n  const [progressSuccess, setProgressSuccess] = useState(false);\n  useEffect(() => {\n    if (book && isOpen) {\n      // Load existing user feedback if provided\n      setRating(existingUserRating || 0);\n      setReview(existingUserReview || '');\n\n      // Load reading progress if available\n      setProgress((userBookListData === null || userBookListData === void 0 ? void 0 : userBookListData.readingProgress) || 0);\n      if (isLoggedIn) {\n        loadExistingFeedback();\n      }\n    }\n  }, [book, isOpen, isLoggedIn, existingUserRating, existingUserReview, userBookListData]);\n  const loadExistingFeedback = async () => {\n    if (!(book !== null && book !== void 0 && book.googleBookId)) return;\n    try {\n      // You might want to add an API to get user's existing feedback\n      // For now, use the provided existing feedback\n      setExistingFeedback({\n        rating: existingUserRating,\n        review: existingUserReview\n      });\n    } catch (error) {\n      console.error('Failed to load existing feedback:', error);\n    }\n  };\n  const handleSubmitReview = async e => {\n    e.preventDefault();\n    if (!book || rating === 0 || !review.trim()) return;\n    setSubmitting(true);\n    setError(null);\n    setSuccess(false);\n    try {\n      await GoogleBookFeedbackService.saveFeedback({\n        googleBookId: book.googleBookId,\n        bookTitle: book.title,\n        authorName: book.authorName,\n        rating: rating,\n        review: review\n      });\n      setSuccess(true);\n      setRating(0);\n      setReview('');\n      setShowReviewForm(false);\n      // Reload existing feedback\n      setTimeout(() => {\n        loadExistingFeedback();\n        setSuccess(false);\n      }, 1500);\n    } catch (err) {\n      setError((err === null || err === void 0 ? void 0 : err.message) || 'Failed to submit review');\n    } finally {\n      setSubmitting(false);\n    }\n  };\n  const handleUpdateProgress = async newProgress => {\n    if (!(book !== null && book !== void 0 && book.googleBookId) || !isLoggedIn || newProgress < 0 || newProgress > 100) return;\n    setIsUpdatingProgress(true);\n    setProgressError(null);\n    setProgressSuccess(false);\n    try {\n      await UserBookListService.updateReadingProgress(book.googleBookId, newProgress);\n      setProgress(newProgress);\n      setProgressSuccess(true);\n      setTimeout(() => setProgressSuccess(false), 2000);\n    } catch (err) {\n      setProgressError((err === null || err === void 0 ? void 0 : err.message) || 'Failed to update progress');\n      setTimeout(() => setProgressError(null), 3000);\n    } finally {\n      setIsUpdatingProgress(false);\n    }\n  };\n  const renderStars = (rating, interactive = false, size = '18px') => {\n    const stars = [];\n    for (let i = 1; i <= 5; i++) {\n      let starIcon;\n      if (i <= rating) {\n        starIcon = /*#__PURE__*/_jsxDEV(StarIcon, {\n          style: {\n            color: '#FFD700',\n            fontSize: size\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 20\n        }, this);\n      } else if (i - 0.5 <= rating) {\n        starIcon = /*#__PURE__*/_jsxDEV(StarHalfIcon, {\n          style: {\n            color: '#FFD700',\n            fontSize: size\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 20\n        }, this);\n      } else {\n        starIcon = /*#__PURE__*/_jsxDEV(StarBorderIcon, {\n          style: {\n            color: '#D3D3D3',\n            fontSize: size\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 20\n        }, this);\n      }\n      stars.push(/*#__PURE__*/_jsxDEV(\"span\", {\n        style: {\n          cursor: interactive ? 'pointer' : 'default',\n          transition: 'transform 0.1s'\n        },\n        onMouseOver: e => {\n          if (interactive) {\n            e.currentTarget.style.transform = 'scale(1.1)';\n          }\n        },\n        onMouseOut: e => {\n          if (interactive) {\n            e.currentTarget.style.transform = 'scale(1)';\n          }\n        },\n        onClick: e => {\n          if (interactive) {\n            const rect = e.currentTarget.getBoundingClientRect();\n            const clickX = e.clientX - rect.left;\n            const starWidth = rect.width;\n            if (clickX < starWidth / 2) {\n              setRating(i - 0.5);\n            } else {\n              setRating(i);\n            }\n          }\n        },\n        children: starIcon\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 9\n      }, this));\n    }\n    return stars;\n  };\n  const truncateDescription = (text, maxLength = 500) => {\n    if (text.length <= maxLength) return text;\n    return text.substring(0, maxLength) + '...';\n  };\n  if (!isOpen || !book) return null;\n  const modalOverlayStyle = {\n    position: 'fixed',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    backgroundColor: 'rgba(0, 0, 0, 0.7)',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    zIndex: 1000,\n    padding: '20px'\n  };\n  const modalContentStyle = {\n    backgroundColor: 'rgba(255, 255, 255, 0.95)',\n    backdropFilter: 'blur(10px)',\n    borderRadius: '16px',\n    maxWidth: '700px',\n    width: '100%',\n    maxHeight: '90vh',\n    overflow: 'auto',\n    boxShadow: '0 20px 40px rgba(0, 0, 0, 0.3)',\n    border: '1px solid rgba(230, 215, 195, 0.3)',\n    position: 'relative'\n  };\n  const headerStyle = {\n    background: 'linear-gradient(135deg, #8B4513, #A0522D)',\n    color: '#FFF8DC',\n    padding: '24px',\n    borderRadius: '16px 16px 0 0',\n    position: 'relative'\n  };\n  const closeButtonStyle = {\n    position: 'absolute',\n    top: '12px',\n    right: '12px',\n    background: 'rgba(255, 255, 255, 0.2)',\n    border: 'none',\n    borderRadius: '50%',\n    width: '32px',\n    height: '32px',\n    cursor: 'pointer',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    color: '#FFF8DC',\n    fontSize: '18px',\n    transition: 'all 0.2s ease'\n  };\n  const bodyStyle = {\n    padding: '24px',\n    color: '#4B3F3A'\n  };\n  const buttonStyle = {\n    backgroundColor: '#D2691E',\n    color: 'white',\n    border: 'none',\n    borderRadius: '8px',\n    padding: '12px 24px',\n    fontSize: '14px',\n    fontWeight: 500,\n    cursor: 'pointer',\n    transition: 'background-color 0.2s',\n    marginRight: '12px',\n    marginBottom: '12px'\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: modalOverlayStyle,\n    onClick: onClose,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: modalContentStyle,\n      onClick: e => e.stopPropagation(),\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: headerStyle,\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          style: closeButtonStyle,\n          onClick: onClose,\n          onMouseOver: e => e.currentTarget.style.backgroundColor = 'rgba(255, 255, 255, 0.3)',\n          onMouseOut: e => e.currentTarget.style.backgroundColor = 'rgba(255, 255, 255, 0.2)',\n          children: /*#__PURE__*/_jsxDEV(CloseIcon, {\n            style: {\n              fontSize: '18px'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          style: {\n            margin: '0 40px 8px 0',\n            fontSize: '24px',\n            lineHeight: '1.3'\n          },\n          children: book.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            margin: '0',\n            fontSize: '16px',\n            opacity: 0.9\n          },\n          children: [\"by \", book.authorName]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: bodyStyle,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            gap: '24px',\n            marginBottom: '24px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              flexShrink: 0\n            },\n            children: book.cover ? /*#__PURE__*/_jsxDEV(\"img\", {\n              src: book.cover,\n              alt: book.title,\n              style: {\n                width: '120px',\n                height: '180px',\n                objectFit: 'cover',\n                borderRadius: '8px',\n                boxShadow: '0 4px 12px rgba(0, 0, 0, 0.2)'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 285,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                width: '120px',\n                height: '180px',\n                background: 'linear-gradient(135deg, #F4E3C1, #E6D7C3)',\n                borderRadius: '8px',\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                boxShadow: '0 4px 12px rgba(0, 0, 0, 0.2)'\n              },\n              children: /*#__PURE__*/_jsxDEV(MenuBookIcon, {\n                style: {\n                  color: '#8B7355',\n                  fontSize: '48px'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 307,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 297,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 283,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              flex: 1\n            },\n            children: [book.averageRating > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginBottom: '12px',\n                display: 'flex',\n                alignItems: 'center',\n                gap: '8px'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: 'flex'\n                },\n                children: renderStars(book.averageRating)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 316,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  fontSize: '14px',\n                  color: '#666'\n                },\n                children: [book.averageRating.toFixed(1), \" (\", book.ratingsCount || 0, \" ratings)\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 319,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 315,\n              columnNumber: 17\n            }, this), book.publishedDate && /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                margin: '8px 0',\n                fontSize: '14px'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Published:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 327,\n                columnNumber: 19\n              }, this), \" \", book.publishedDate]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 326,\n              columnNumber: 17\n            }, this), book.pageCount && /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                margin: '8px 0',\n                fontSize: '14px'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Pages:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 333,\n                columnNumber: 19\n              }, this), \" \", book.pageCount.toLocaleString()]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 332,\n              columnNumber: 17\n            }, this), book.categories && Array.isArray(book.categories) && book.categories.length > 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                margin: '8px 0',\n                fontSize: '14px'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Categories:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 339,\n                columnNumber: 19\n              }, this), \" \", book.categories.join(', ')]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 338,\n              columnNumber: 17\n            }, this), book.isbn && /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                margin: '8px 0',\n                fontSize: '14px'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"ISBN:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 345,\n                columnNumber: 19\n              }, this), \" \", book.isbn]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 344,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 313,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 11\n        }, this), isLoggedIn && userBookListData && userBookListData.listType === 'CURRENTLY_READING' && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: '24px',\n            borderTop: '1px solid #E6D7C3',\n            paddingTop: '24px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            style: {\n              marginBottom: '16px',\n              color: '#8B4513',\n              fontSize: '18px'\n            },\n            children: \"Reading Progress\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginBottom: '16px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                justifyContent: 'space-between',\n                alignItems: 'center',\n                marginBottom: '8px'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  color: '#6A5E4D',\n                  fontSize: '14px'\n                },\n                children: \"Progress\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 365,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  color: '#4B3F30',\n                  fontSize: '14px',\n                  fontWeight: 500\n                },\n                children: [progress, \"%\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 366,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 359,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                width: '100%',\n                backgroundColor: '#F4E3C1',\n                borderRadius: '8px',\n                height: '12px',\n                position: 'relative',\n                cursor: 'pointer'\n              },\n              onClick: e => {\n                if (isUpdatingProgress) return;\n                const rect = e.currentTarget.getBoundingClientRect();\n                const clickX = e.clientX - rect.left;\n                const newProgress = Math.round(clickX / rect.width * 100);\n                handleUpdateProgress(Math.max(0, Math.min(100, newProgress)));\n              },\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  backgroundColor: '#FF9800',\n                  height: '12px',\n                  borderRadius: '8px',\n                  width: `${progress}%`,\n                  transition: 'width 0.3s ease',\n                  position: 'relative'\n                },\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    position: 'absolute',\n                    right: '-6px',\n                    top: '50%',\n                    transform: 'translateY(-50%)',\n                    width: '12px',\n                    height: '12px',\n                    backgroundColor: '#FF9800',\n                    border: '2px solid white',\n                    borderRadius: '50%',\n                    cursor: 'pointer',\n                    boxShadow: '0 2px 4px rgba(0,0,0,0.2)'\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 395,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 386,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 372,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                color: '#8B7355',\n                fontSize: '12px',\n                marginTop: '8px',\n                fontStyle: 'italic'\n              },\n              children: \"Click on the progress bar to update your reading progress\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 411,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 358,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              gap: '8px',\n              flexWrap: 'wrap',\n              marginBottom: '16px'\n            },\n            children: [25, 50, 75, 100].map(percent => /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleUpdateProgress(percent),\n              disabled: isUpdatingProgress || progress === percent,\n              style: {\n                backgroundColor: progress === percent ? '#D2691E' : 'transparent',\n                color: progress === percent ? 'white' : '#D2691E',\n                border: '1px solid #D2691E',\n                borderRadius: '6px',\n                padding: '6px 12px',\n                fontSize: '12px',\n                fontWeight: 500,\n                cursor: isUpdatingProgress || progress === percent ? 'default' : 'pointer',\n                transition: 'all 0.2s',\n                opacity: isUpdatingProgress ? 0.5 : 1\n              },\n              onMouseOver: e => {\n                if (!isUpdatingProgress && progress !== percent) {\n                  e.currentTarget.style.backgroundColor = '#D2691E';\n                  e.currentTarget.style.color = 'white';\n                }\n              },\n              onMouseOut: e => {\n                if (progress !== percent) {\n                  e.currentTarget.style.backgroundColor = 'transparent';\n                  e.currentTarget.style.color = '#D2691E';\n                }\n              },\n              children: [percent, \"%\"]\n            }, percent, true, {\n              fileName: _jsxFileName,\n              lineNumber: 424,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 422,\n            columnNumber: 15\n          }, this), progressError && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              backgroundColor: '#FEE2E2',\n              color: '#DC2626',\n              padding: '8px 12px',\n              borderRadius: '6px',\n              fontSize: '12px',\n              marginBottom: '8px'\n            },\n            children: progressError\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 460,\n            columnNumber: 17\n          }, this), progressSuccess && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              backgroundColor: '#D1FAE5',\n              color: '#065F46',\n              padding: '8px 12px',\n              borderRadius: '6px',\n              fontSize: '12px',\n              marginBottom: '8px'\n            },\n            children: \"Progress updated successfully!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 473,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 13\n        }, this), book.synopsis && book.synopsis !== 'No description available.' && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: '24px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            style: {\n              marginBottom: '12px',\n              color: '#8B4513',\n              fontSize: '18px'\n            },\n            children: \"Description\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 490,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              lineHeight: '1.6',\n              margin: '0',\n              fontSize: '14px',\n              color: '#555'\n            },\n            children: truncateDescription(book.synopsis)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 493,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 489,\n          columnNumber: 13\n        }, this), isLoggedIn && existingFeedback && (existingFeedback.rating || existingFeedback.review) && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            borderTop: '1px solid #E6D7C3',\n            paddingTop: '24px',\n            marginBottom: '24px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            style: {\n              marginBottom: '16px',\n              color: '#8B4513',\n              fontSize: '18px'\n            },\n            children: \"Your Review\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 507,\n            columnNumber: 15\n          }, this), existingFeedback.rating && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginBottom: '12px',\n              display: 'flex',\n              alignItems: 'center',\n              gap: '8px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                fontSize: '14px',\n                color: '#666',\n                marginRight: '8px'\n              },\n              children: \"Your Rating:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 513,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex'\n              },\n              children: renderStars(existingFeedback.rating)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 514,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                fontSize: '14px',\n                color: '#666'\n              },\n              children: [existingFeedback.rating, \"/5\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 517,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 512,\n            columnNumber: 17\n          }, this), existingFeedback.review && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              backgroundColor: '#F9F7F4',\n              padding: '16px',\n              borderRadius: '8px',\n              border: '1px solid #E6D7C3',\n              marginBottom: '16px'\n            },\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                fontSize: '14px',\n                lineHeight: '1.6',\n                color: '#4B3F30',\n                margin: 0\n              },\n              children: [\"\\\"\", existingFeedback.review, \"\\\"\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 531,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 524,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            style: {\n              backgroundColor: 'transparent',\n              color: '#D2691E',\n              border: '1px solid #D2691E',\n              borderRadius: '8px',\n              padding: '8px 16px',\n              fontSize: '14px',\n              fontWeight: 500,\n              cursor: 'pointer',\n              transition: 'all 0.2s'\n            },\n            onMouseOver: e => {\n              e.currentTarget.style.backgroundColor = '#D2691E';\n              e.currentTarget.style.color = 'white';\n            },\n            onMouseOut: e => {\n              e.currentTarget.style.backgroundColor = 'transparent';\n              e.currentTarget.style.color = '#D2691E';\n            },\n            onClick: () => {\n              setShowReviewForm(true);\n              setRating(existingFeedback.rating || 0);\n              setReview(existingFeedback.review || '');\n            },\n            children: \"Edit Review\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 542,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 506,\n          columnNumber: 13\n        }, this), isLoggedIn && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            borderTop: '1px solid #E6D7C3',\n            paddingTop: '24px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            style: {\n              marginBottom: '16px',\n              color: '#8B4513',\n              fontSize: '18px'\n            },\n            children: existingFeedback && (existingFeedback.rating || existingFeedback.review) ? 'Update Review' : 'Rate & Review'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 576,\n            columnNumber: 15\n          }, this), !showReviewForm ? /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              style: buttonStyle,\n              onMouseOver: e => e.currentTarget.style.backgroundColor = '#B85A1A',\n              onMouseOut: e => e.currentTarget.style.backgroundColor = '#D2691E',\n              onClick: () => setShowReviewForm(true),\n              children: \"Write a Review\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 582,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 581,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: handleSubmitReview,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginBottom: '20px'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: {\n                  display: 'block',\n                  color: '#4B3F30',\n                  fontSize: '16px',\n                  fontWeight: 500,\n                  marginBottom: '12px'\n                },\n                children: \"Your Rating *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 595,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: '8px'\n                },\n                children: [renderStars(rating, true, '24px'), /*#__PURE__*/_jsxDEV(\"span\", {\n                  style: {\n                    color: '#6A5E4D',\n                    fontSize: '14px',\n                    marginLeft: '8px'\n                  },\n                  children: rating > 0 ? `${rating} out of 5` : 'Select rating'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 606,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 604,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 594,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginBottom: '24px'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: {\n                  display: 'block',\n                  color: '#4B3F30',\n                  fontSize: '16px',\n                  fontWeight: 500,\n                  marginBottom: '12px'\n                },\n                children: \"Your Review *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 614,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                value: review,\n                onChange: e => setReview(e.target.value),\n                placeholder: \"Share your thoughts about this book...\",\n                style: {\n                  width: '100%',\n                  padding: '12px',\n                  border: '1px solid #E6D7C3',\n                  borderRadius: '8px',\n                  fontSize: '14px',\n                  fontFamily: 'inherit',\n                  backgroundColor: 'rgba(255, 255, 255, 0.8)',\n                  resize: 'vertical',\n                  minHeight: '100px'\n                },\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 623,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 613,\n              columnNumber: 19\n            }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                backgroundColor: '#FEE2E2',\n                color: '#DC2626',\n                padding: '12px',\n                borderRadius: '8px',\n                marginBottom: '16px',\n                fontSize: '14px'\n              },\n              children: error\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 644,\n              columnNumber: 21\n            }, this), success && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                backgroundColor: '#D1FAE5',\n                color: '#065F46',\n                padding: '12px',\n                borderRadius: '8px',\n                marginBottom: '16px',\n                fontSize: '14px'\n              },\n              children: \"Review submitted successfully!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 657,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                gap: '12px'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                style: {\n                  ...buttonStyle,\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: '8px'\n                },\n                disabled: submitting || rating === 0 || !review.trim(),\n                onMouseOver: e => {\n                  if (!submitting && rating > 0 && review.trim()) {\n                    e.currentTarget.style.backgroundColor = '#B85A1A';\n                  }\n                },\n                onMouseOut: e => {\n                  if (!submitting && rating > 0 && review.trim()) {\n                    e.currentTarget.style.backgroundColor = '#D2691E';\n                  }\n                },\n                children: submitting ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      width: '16px',\n                      height: '16px',\n                      border: '2px solid transparent',\n                      borderTop: '2px solid white',\n                      borderRadius: '50%',\n                      animation: 'spin 1s linear infinite'\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 693,\n                    columnNumber: 27\n                  }, this), \"Submitting...\"]\n                }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(SendIcon, {\n                    style: {\n                      fontSize: '16px'\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 705,\n                    columnNumber: 27\n                  }, this), \"Submit Review\"]\n                }, void 0, true)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 671,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: () => {\n                  setShowReviewForm(false);\n                  setRating(0);\n                  setReview('');\n                  setError(null);\n                },\n                style: {\n                  backgroundColor: 'transparent',\n                  color: '#D2691E',\n                  border: '1px solid #D2691E',\n                  borderRadius: '8px',\n                  padding: '12px 24px',\n                  fontSize: '14px',\n                  fontWeight: 500,\n                  cursor: 'pointer',\n                  transition: 'all 0.2s'\n                },\n                onMouseOver: e => {\n                  e.currentTarget.style.backgroundColor = '#D2691E';\n                  e.currentTarget.style.color = 'white';\n                },\n                onMouseOut: e => {\n                  e.currentTarget.style.backgroundColor = 'transparent';\n                  e.currentTarget.style.color = '#D2691E';\n                },\n                children: \"Cancel\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 711,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 670,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 592,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 575,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"style\", {\n      children: `\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n      `\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 749,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 261,\n    columnNumber: 5\n  }, this);\n};\n_s(UnifiedBookDetailsModal, \"ktuer+4d8/AeyhwetminvWqmVGo=\", false, function () {\n  return [useAuth];\n});\n_c = UnifiedBookDetailsModal;\nexport default UnifiedBookDetailsModal;\nvar _c;\n$RefreshReg$(_c, \"UnifiedBookDetailsModal\");","map":{"version":3,"names":["React","useState","useEffect","Close","CloseIcon","Star","StarIcon","StarBorder","StarBorderIcon","StarHalf","StarHalfIcon","Send","SendIcon","MenuBook","MenuBookIcon","GoogleBookFeedbackService","UserBookListService","useAuth","jsxDEV","_jsxDEV","Fragment","_Fragment","UnifiedBookDetailsModal","book","isOpen","onClose","context","existingUserRating","existingUserReview","userBookListData","onBookMoved","_s","isLoggedIn","rating","setRating","review","setReview","submitting","setSubmitting","error","setError","success","setSuccess","showReviewForm","setShowReviewForm","existingFeedback","setExistingFeedback","progress","setProgress","isUpdatingProgress","setIsUpdatingProgress","progressError","setProgressError","progressSuccess","setProgressSuccess","readingProgress","loadExistingFeedback","googleBookId","console","handleSubmitReview","e","preventDefault","trim","saveFeedback","bookTitle","title","authorName","setTimeout","err","message","handleUpdateProgress","newProgress","updateReadingProgress","renderStars","interactive","size","stars","i","starIcon","style","color","fontSize","fileName","_jsxFileName","lineNumber","columnNumber","push","cursor","transition","onMouseOver","currentTarget","transform","onMouseOut","onClick","rect","getBoundingClientRect","clickX","clientX","left","starWidth","width","children","truncateDescription","text","maxLength","length","substring","modalOverlayStyle","position","top","right","bottom","backgroundColor","display","alignItems","justifyContent","zIndex","padding","modalContentStyle","backdropFilter","borderRadius","maxWidth","maxHeight","overflow","boxShadow","border","headerStyle","background","closeButtonStyle","height","bodyStyle","buttonStyle","fontWeight","marginRight","marginBottom","stopPropagation","margin","lineHeight","opacity","gap","flexShrink","cover","src","alt","objectFit","flex","averageRating","toFixed","ratingsCount","publishedDate","pageCount","toLocaleString","categories","Array","isArray","join","isbn","listType","borderTop","paddingTop","Math","round","max","min","marginTop","fontStyle","flexWrap","map","percent","disabled","synopsis","onSubmit","marginLeft","value","onChange","target","placeholder","fontFamily","resize","minHeight","required","type","animation","_c","$RefreshReg$"],"sources":["/Users/cluckbucks/projects/booknexus-social/frontend/src/components/UnifiedBookDetailsModal.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport {\n  Close as CloseIcon,\n  Star as StarIcon,\n  StarBorder as StarBorderIcon,\n  StarHalf as StarHalfIcon,\n  Send as SendIcon,\n  MenuBook as MenuBookIcon\n} from '@mui/icons-material';\nimport { GoogleBook } from '../hooks/useGoogleBooksSimple';\nimport { GoogleBookFeedbackService } from '../app/services/services/GoogleBookFeedbackService';\nimport { UserBookListService } from '../app/services/services/UserBookListService';\nimport { useAuth } from '../hooks/useAuth';\n\ninterface UnifiedBookDetailsModalProps {\n  book: GoogleBook | null;\n  isOpen: boolean;\n  onClose: () => void;\n  context?: 'discovery' | 'library'; // To show different action buttons\n  existingUserRating?: number;\n  existingUserReview?: string;\n  userBookListData?: any; // Full UserBookList object for progress and other data\n  onBookMoved?: () => void; // Callback when book is moved to different shelf\n}\n\nconst UnifiedBookDetailsModal: React.FC<UnifiedBookDetailsModalProps> = ({\n  book,\n  isOpen,\n  onClose,\n  context = 'discovery',\n  existingUserRating,\n  existingUserReview,\n  userBookListData,\n  onBookMoved\n}) => {\n  const { isLoggedIn } = useAuth();\n  const [rating, setRating] = useState<number>(0);\n  const [review, setReview] = useState<string>('');\n  const [submitting, setSubmitting] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [success, setSuccess] = useState(false);\n  const [showReviewForm, setShowReviewForm] = useState(false);\n  const [existingFeedback, setExistingFeedback] = useState<any>(null);\n  const [progress, setProgress] = useState<number>(0);\n  const [isUpdatingProgress, setIsUpdatingProgress] = useState(false);\n  const [progressError, setProgressError] = useState<string | null>(null);\n  const [progressSuccess, setProgressSuccess] = useState(false);\n\n  useEffect(() => {\n    if (book && isOpen) {\n      // Load existing user feedback if provided\n      setRating(existingUserRating || 0);\n      setReview(existingUserReview || '');\n      \n      // Load reading progress if available\n      setProgress(userBookListData?.readingProgress || 0);\n      \n      if (isLoggedIn) {\n        loadExistingFeedback();\n      }\n    }\n  }, [book, isOpen, isLoggedIn, existingUserRating, existingUserReview, userBookListData]);\n\n  const loadExistingFeedback = async () => {\n    if (!book?.googleBookId) return;\n    \n    try {\n      // You might want to add an API to get user's existing feedback\n      // For now, use the provided existing feedback\n      setExistingFeedback({\n        rating: existingUserRating,\n        review: existingUserReview\n      });\n    } catch (error) {\n      console.error('Failed to load existing feedback:', error);\n    }\n  };\n\n  const handleSubmitReview = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!book || rating === 0 || !review.trim()) return;\n\n    setSubmitting(true);\n    setError(null);\n    setSuccess(false);\n\n    try {\n      await GoogleBookFeedbackService.saveFeedback({\n        googleBookId: book.googleBookId,\n        bookTitle: book.title,\n        authorName: book.authorName,\n        rating: rating,\n        review: review\n      });\n      setSuccess(true);\n      setRating(0);\n      setReview('');\n      setShowReviewForm(false);\n      // Reload existing feedback\n      setTimeout(() => {\n        loadExistingFeedback();\n        setSuccess(false);\n      }, 1500);\n    } catch (err: any) {\n      setError(err?.message || 'Failed to submit review');\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  const handleUpdateProgress = async (newProgress: number) => {\n    if (!book?.googleBookId || !isLoggedIn || newProgress < 0 || newProgress > 100) return;\n    \n    setIsUpdatingProgress(true);\n    setProgressError(null);\n    setProgressSuccess(false);\n    \n    try {\n      await UserBookListService.updateReadingProgress(book.googleBookId, newProgress);\n      setProgress(newProgress);\n      setProgressSuccess(true);\n      setTimeout(() => setProgressSuccess(false), 2000);\n    } catch (err: any) {\n      setProgressError(err?.message || 'Failed to update progress');\n      setTimeout(() => setProgressError(null), 3000);\n    } finally {\n      setIsUpdatingProgress(false);\n    }\n  };\n\n  const renderStars = (rating: number, interactive: boolean = false, size: string = '18px') => {\n    const stars = [];\n    for (let i = 1; i <= 5; i++) {\n      let starIcon;\n      if (i <= rating) {\n        starIcon = <StarIcon style={{ color: '#FFD700', fontSize: size }} />;\n      } else if (i - 0.5 <= rating) {\n        starIcon = <StarHalfIcon style={{ color: '#FFD700', fontSize: size }} />;\n      } else {\n        starIcon = <StarBorderIcon style={{ color: '#D3D3D3', fontSize: size }} />;\n      }\n\n      stars.push(\n        <span\n          key={i}\n          style={{\n            cursor: interactive ? 'pointer' : 'default',\n            transition: 'transform 0.1s'\n          }}\n          onMouseOver={(e) => {\n            if (interactive) {\n              e.currentTarget.style.transform = 'scale(1.1)';\n            }\n          }}\n          onMouseOut={(e) => {\n            if (interactive) {\n              e.currentTarget.style.transform = 'scale(1)';\n            }\n          }}\n          onClick={(e) => {\n            if (interactive) {\n              const rect = e.currentTarget.getBoundingClientRect();\n              const clickX = e.clientX - rect.left;\n              const starWidth = rect.width;\n              \n              if (clickX < starWidth / 2) {\n                setRating(i - 0.5);\n              } else {\n                setRating(i);\n              }\n            }\n          }}\n        >\n          {starIcon}\n        </span>\n      );\n    }\n    return stars;\n  };\n\n  const truncateDescription = (text: string, maxLength: number = 500) => {\n    if (text.length <= maxLength) return text;\n    return text.substring(0, maxLength) + '...';\n  };\n\n  if (!isOpen || !book) return null;\n\n  const modalOverlayStyle: React.CSSProperties = {\n    position: 'fixed',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    backgroundColor: 'rgba(0, 0, 0, 0.7)',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    zIndex: 1000,\n    padding: '20px'\n  };\n\n  const modalContentStyle: React.CSSProperties = {\n    backgroundColor: 'rgba(255, 255, 255, 0.95)',\n    backdropFilter: 'blur(10px)',\n    borderRadius: '16px',\n    maxWidth: '700px',\n    width: '100%',\n    maxHeight: '90vh',\n    overflow: 'auto',\n    boxShadow: '0 20px 40px rgba(0, 0, 0, 0.3)',\n    border: '1px solid rgba(230, 215, 195, 0.3)',\n    position: 'relative'\n  };\n\n  const headerStyle: React.CSSProperties = {\n    background: 'linear-gradient(135deg, #8B4513, #A0522D)',\n    color: '#FFF8DC',\n    padding: '24px',\n    borderRadius: '16px 16px 0 0',\n    position: 'relative'\n  };\n\n  const closeButtonStyle: React.CSSProperties = {\n    position: 'absolute',\n    top: '12px',\n    right: '12px',\n    background: 'rgba(255, 255, 255, 0.2)',\n    border: 'none',\n    borderRadius: '50%',\n    width: '32px',\n    height: '32px',\n    cursor: 'pointer',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    color: '#FFF8DC',\n    fontSize: '18px',\n    transition: 'all 0.2s ease'\n  };\n\n  const bodyStyle: React.CSSProperties = {\n    padding: '24px',\n    color: '#4B3F3A'\n  };\n\n  const buttonStyle: React.CSSProperties = {\n    backgroundColor: '#D2691E',\n    color: 'white',\n    border: 'none',\n    borderRadius: '8px',\n    padding: '12px 24px',\n    fontSize: '14px',\n    fontWeight: 500,\n    cursor: 'pointer',\n    transition: 'background-color 0.2s',\n    marginRight: '12px',\n    marginBottom: '12px'\n  };\n\n  return (\n    <div style={modalOverlayStyle} onClick={onClose}>\n      <div style={modalContentStyle} onClick={(e) => e.stopPropagation()}>\n        <div style={headerStyle}>\n          <button \n            style={closeButtonStyle}\n            onClick={onClose}\n            onMouseOver={(e) => e.currentTarget.style.backgroundColor = 'rgba(255, 255, 255, 0.3)'}\n            onMouseOut={(e) => e.currentTarget.style.backgroundColor = 'rgba(255, 255, 255, 0.2)'}\n          >\n            <CloseIcon style={{ fontSize: '18px' }} />\n          </button>\n          <h2 style={{ margin: '0 40px 8px 0', fontSize: '24px', lineHeight: '1.3' }}>\n            {book.title}\n          </h2>\n          <p style={{ margin: '0', fontSize: '16px', opacity: 0.9 }}>\n            by {book.authorName}\n          </p>\n        </div>\n        \n        <div style={bodyStyle}>\n          <div style={{ display: 'flex', gap: '24px', marginBottom: '24px' }}>\n            {/* Book Cover */}\n            <div style={{ flexShrink: 0 }}>\n              {book.cover ? (\n                <img\n                  src={book.cover}\n                  alt={book.title}\n                  style={{\n                    width: '120px',\n                    height: '180px',\n                    objectFit: 'cover',\n                    borderRadius: '8px',\n                    boxShadow: '0 4px 12px rgba(0, 0, 0, 0.2)'\n                  }}\n                />\n              ) : (\n                <div style={{\n                  width: '120px',\n                  height: '180px',\n                  background: 'linear-gradient(135deg, #F4E3C1, #E6D7C3)',\n                  borderRadius: '8px',\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                  boxShadow: '0 4px 12px rgba(0, 0, 0, 0.2)'\n                }}>\n                  <MenuBookIcon style={{ color: '#8B7355', fontSize: '48px' }} />\n                </div>\n              )}\n            </div>\n            \n            {/* Book Info */}\n            <div style={{ flex: 1 }}>\n              {book.averageRating > 0 && (\n                <div style={{ marginBottom: '12px', display: 'flex', alignItems: 'center', gap: '8px' }}>\n                  <div style={{ display: 'flex' }}>\n                    {renderStars(book.averageRating)}\n                  </div>\n                  <span style={{ fontSize: '14px', color: '#666' }}>\n                    {book.averageRating.toFixed(1)} ({book.ratingsCount || 0} ratings)\n                  </span>\n                </div>\n              )}\n              \n              {book.publishedDate && (\n                <p style={{ margin: '8px 0', fontSize: '14px' }}>\n                  <strong>Published:</strong> {book.publishedDate}\n                </p>\n              )}\n              \n              {book.pageCount && (\n                <p style={{ margin: '8px 0', fontSize: '14px' }}>\n                  <strong>Pages:</strong> {book.pageCount.toLocaleString()}\n                </p>\n              )}\n              \n              {book.categories && Array.isArray(book.categories) && book.categories.length > 0 && (\n                <p style={{ margin: '8px 0', fontSize: '14px' }}>\n                  <strong>Categories:</strong> {book.categories.join(', ')}\n                </p>\n              )}\n              \n              {book.isbn && (\n                <p style={{ margin: '8px 0', fontSize: '14px' }}>\n                  <strong>ISBN:</strong> {book.isbn}\n                </p>\n              )}\n            </div>\n          </div>\n          \n          {/* Reading Progress Section - Only for Currently Reading books */}\n          {isLoggedIn && userBookListData && userBookListData.listType === 'CURRENTLY_READING' && (\n            <div style={{ marginBottom: '24px', borderTop: '1px solid #E6D7C3', paddingTop: '24px' }}>\n              <h3 style={{ marginBottom: '16px', color: '#8B4513', fontSize: '18px' }}>\n                Reading Progress\n              </h3>\n              \n              <div style={{ marginBottom: '16px' }}>\n                <div style={{\n                  display: 'flex',\n                  justifyContent: 'space-between',\n                  alignItems: 'center',\n                  marginBottom: '8px'\n                }}>\n                  <span style={{ color: '#6A5E4D', fontSize: '14px' }}>Progress</span>\n                  <span style={{ color: '#4B3F30', fontSize: '14px', fontWeight: 500 }}>\n                    {progress}%\n                  </span>\n                </div>\n                \n                {/* Progress Bar */}\n                <div style={{\n                  width: '100%',\n                  backgroundColor: '#F4E3C1',\n                  borderRadius: '8px',\n                  height: '12px',\n                  position: 'relative',\n                  cursor: 'pointer'\n                }} onClick={(e) => {\n                  if (isUpdatingProgress) return;\n                  const rect = e.currentTarget.getBoundingClientRect();\n                  const clickX = e.clientX - rect.left;\n                  const newProgress = Math.round((clickX / rect.width) * 100);\n                  handleUpdateProgress(Math.max(0, Math.min(100, newProgress)));\n                }}>\n                  <div style={{\n                    backgroundColor: '#FF9800',\n                    height: '12px',\n                    borderRadius: '8px',\n                    width: `${progress}%`,\n                    transition: 'width 0.3s ease',\n                    position: 'relative'\n                  }}>\n                    {/* Progress Handle */}\n                    <div style={{\n                      position: 'absolute',\n                      right: '-6px',\n                      top: '50%',\n                      transform: 'translateY(-50%)',\n                      width: '12px',\n                      height: '12px',\n                      backgroundColor: '#FF9800',\n                      border: '2px solid white',\n                      borderRadius: '50%',\n                      cursor: 'pointer',\n                      boxShadow: '0 2px 4px rgba(0,0,0,0.2)'\n                    }} />\n                  </div>\n                </div>\n                \n                <p style={{\n                  color: '#8B7355',\n                  fontSize: '12px',\n                  marginTop: '8px',\n                  fontStyle: 'italic'\n                }}>\n                  Click on the progress bar to update your reading progress\n                </p>\n              </div>\n\n              {/* Quick Progress Buttons */}\n              <div style={{ display: 'flex', gap: '8px', flexWrap: 'wrap', marginBottom: '16px' }}>\n                {[25, 50, 75, 100].map(percent => (\n                  <button\n                    key={percent}\n                    onClick={() => handleUpdateProgress(percent)}\n                    disabled={isUpdatingProgress || progress === percent}\n                    style={{\n                      backgroundColor: progress === percent ? '#D2691E' : 'transparent',\n                      color: progress === percent ? 'white' : '#D2691E',\n                      border: '1px solid #D2691E',\n                      borderRadius: '6px',\n                      padding: '6px 12px',\n                      fontSize: '12px',\n                      fontWeight: 500,\n                      cursor: isUpdatingProgress || progress === percent ? 'default' : 'pointer',\n                      transition: 'all 0.2s',\n                      opacity: isUpdatingProgress ? 0.5 : 1\n                    }}\n                    onMouseOver={(e) => {\n                      if (!isUpdatingProgress && progress !== percent) {\n                        e.currentTarget.style.backgroundColor = '#D2691E';\n                        e.currentTarget.style.color = 'white';\n                      }\n                    }}\n                    onMouseOut={(e) => {\n                      if (progress !== percent) {\n                        e.currentTarget.style.backgroundColor = 'transparent';\n                        e.currentTarget.style.color = '#D2691E';\n                      }\n                    }}\n                  >\n                    {percent}%\n                  </button>\n                ))}\n              </div>\n\n              {/* Progress Messages */}\n              {progressError && (\n                <div style={{\n                  backgroundColor: '#FEE2E2',\n                  color: '#DC2626',\n                  padding: '8px 12px',\n                  borderRadius: '6px',\n                  fontSize: '12px',\n                  marginBottom: '8px'\n                }}>\n                  {progressError}\n                </div>\n              )}\n\n              {progressSuccess && (\n                <div style={{\n                  backgroundColor: '#D1FAE5',\n                  color: '#065F46',\n                  padding: '8px 12px',\n                  borderRadius: '6px',\n                  fontSize: '12px',\n                  marginBottom: '8px'\n                }}>\n                  Progress updated successfully!\n                </div>\n              )}\n            </div>\n          )}\n          \n          {/* Description */}\n          {book.synopsis && book.synopsis !== 'No description available.' && (\n            <div style={{ marginBottom: '24px' }}>\n              <h3 style={{ marginBottom: '12px', color: '#8B4513', fontSize: '18px' }}>\n                Description\n              </h3>\n              <p style={{ \n                lineHeight: '1.6', \n                margin: '0',\n                fontSize: '14px',\n                color: '#555'\n              }}>\n                {truncateDescription(book.synopsis)}\n              </p>\n            </div>\n          )}\n\n          {/* Existing User Review */}\n          {isLoggedIn && existingFeedback && (existingFeedback.rating || existingFeedback.review) && (\n            <div style={{ borderTop: '1px solid #E6D7C3', paddingTop: '24px', marginBottom: '24px' }}>\n              <h3 style={{ marginBottom: '16px', color: '#8B4513', fontSize: '18px' }}>\n                Your Review\n              </h3>\n              \n              {existingFeedback.rating && (\n                <div style={{ marginBottom: '12px', display: 'flex', alignItems: 'center', gap: '8px' }}>\n                  <span style={{ fontSize: '14px', color: '#666', marginRight: '8px' }}>Your Rating:</span>\n                  <div style={{ display: 'flex' }}>\n                    {renderStars(existingFeedback.rating)}\n                  </div>\n                  <span style={{ fontSize: '14px', color: '#666' }}>\n                    {existingFeedback.rating}/5\n                  </span>\n                </div>\n              )}\n              \n              {existingFeedback.review && (\n                <div style={{\n                  backgroundColor: '#F9F7F4',\n                  padding: '16px',\n                  borderRadius: '8px',\n                  border: '1px solid #E6D7C3',\n                  marginBottom: '16px'\n                }}>\n                  <p style={{\n                    fontSize: '14px',\n                    lineHeight: '1.6',\n                    color: '#4B3F30',\n                    margin: 0\n                  }}>\n                    \"{existingFeedback.review}\"\n                  </p>\n                </div>\n              )}\n              \n              <button\n                style={{\n                  backgroundColor: 'transparent',\n                  color: '#D2691E',\n                  border: '1px solid #D2691E',\n                  borderRadius: '8px',\n                  padding: '8px 16px',\n                  fontSize: '14px',\n                  fontWeight: 500,\n                  cursor: 'pointer',\n                  transition: 'all 0.2s'\n                }}\n                onMouseOver={(e) => {\n                  e.currentTarget.style.backgroundColor = '#D2691E';\n                  e.currentTarget.style.color = 'white';\n                }}\n                onMouseOut={(e) => {\n                  e.currentTarget.style.backgroundColor = 'transparent';\n                  e.currentTarget.style.color = '#D2691E';\n                }}\n                onClick={() => {\n                  setShowReviewForm(true);\n                  setRating(existingFeedback.rating || 0);\n                  setReview(existingFeedback.review || '');\n                }}\n              >\n                Edit Review\n              </button>\n            </div>\n          )}\n\n          {/* Review Section */}\n          {isLoggedIn && (\n            <div style={{ borderTop: '1px solid #E6D7C3', paddingTop: '24px' }}>\n              <h3 style={{ marginBottom: '16px', color: '#8B4513', fontSize: '18px' }}>\n                {existingFeedback && (existingFeedback.rating || existingFeedback.review) ? 'Update Review' : 'Rate & Review'}\n              </h3>\n              \n              {!showReviewForm ? (\n                <div>\n                  <button\n                    style={buttonStyle}\n                    onMouseOver={(e) => e.currentTarget.style.backgroundColor = '#B85A1A'}\n                    onMouseOut={(e) => e.currentTarget.style.backgroundColor = '#D2691E'}\n                    onClick={() => setShowReviewForm(true)}\n                  >\n                    Write a Review\n                  </button>\n                </div>\n              ) : (\n                <form onSubmit={handleSubmitReview}>\n                  {/* Rating */}\n                  <div style={{ marginBottom: '20px' }}>\n                    <label style={{\n                      display: 'block',\n                      color: '#4B3F30',\n                      fontSize: '16px',\n                      fontWeight: 500,\n                      marginBottom: '12px'\n                    }}>\n                      Your Rating *\n                    </label>\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\n                      {renderStars(rating, true, '24px')}\n                      <span style={{ color: '#6A5E4D', fontSize: '14px', marginLeft: '8px' }}>\n                        {rating > 0 ? `${rating} out of 5` : 'Select rating'}\n                      </span>\n                    </div>\n                  </div>\n\n                  {/* Review Text */}\n                  <div style={{ marginBottom: '24px' }}>\n                    <label style={{\n                      display: 'block',\n                      color: '#4B3F30',\n                      fontSize: '16px',\n                      fontWeight: 500,\n                      marginBottom: '12px'\n                    }}>\n                      Your Review *\n                    </label>\n                    <textarea\n                      value={review}\n                      onChange={(e) => setReview(e.target.value)}\n                      placeholder=\"Share your thoughts about this book...\"\n                      style={{\n                        width: '100%',\n                        padding: '12px',\n                        border: '1px solid #E6D7C3',\n                        borderRadius: '8px',\n                        fontSize: '14px',\n                        fontFamily: 'inherit',\n                        backgroundColor: 'rgba(255, 255, 255, 0.8)',\n                        resize: 'vertical',\n                        minHeight: '100px'\n                      }}\n                      required\n                    />\n                  </div>\n\n                  {/* Error/Success Messages */}\n                  {error && (\n                    <div style={{\n                      backgroundColor: '#FEE2E2',\n                      color: '#DC2626',\n                      padding: '12px',\n                      borderRadius: '8px',\n                      marginBottom: '16px',\n                      fontSize: '14px'\n                    }}>\n                      {error}\n                    </div>\n                  )}\n\n                  {success && (\n                    <div style={{\n                      backgroundColor: '#D1FAE5',\n                      color: '#065F46',\n                      padding: '12px',\n                      borderRadius: '8px',\n                      marginBottom: '16px',\n                      fontSize: '14px'\n                    }}>\n                      Review submitted successfully!\n                    </div>\n                  )}\n\n                  {/* Form Buttons */}\n                  <div style={{ display: 'flex', gap: '12px' }}>\n                    <button\n                      type=\"submit\"\n                      style={{\n                        ...buttonStyle,\n                        display: 'flex',\n                        alignItems: 'center',\n                        gap: '8px'\n                      }}\n                      disabled={submitting || rating === 0 || !review.trim()}\n                      onMouseOver={(e) => {\n                        if (!submitting && rating > 0 && review.trim()) {\n                          e.currentTarget.style.backgroundColor = '#B85A1A';\n                        }\n                      }}\n                      onMouseOut={(e) => {\n                        if (!submitting && rating > 0 && review.trim()) {\n                          e.currentTarget.style.backgroundColor = '#D2691E';\n                        }\n                      }}\n                    >\n                      {submitting ? (\n                        <>\n                          <div style={{\n                            width: '16px',\n                            height: '16px',\n                            border: '2px solid transparent',\n                            borderTop: '2px solid white',\n                            borderRadius: '50%',\n                            animation: 'spin 1s linear infinite'\n                          }} />\n                          Submitting...\n                        </>\n                      ) : (\n                        <>\n                          <SendIcon style={{ fontSize: '16px' }} />\n                          Submit Review\n                        </>\n                      )}\n                    </button>\n                    \n                    <button\n                      type=\"button\"\n                      onClick={() => {\n                        setShowReviewForm(false);\n                        setRating(0);\n                        setReview('');\n                        setError(null);\n                      }}\n                      style={{\n                        backgroundColor: 'transparent',\n                        color: '#D2691E',\n                        border: '1px solid #D2691E',\n                        borderRadius: '8px',\n                        padding: '12px 24px',\n                        fontSize: '14px',\n                        fontWeight: 500,\n                        cursor: 'pointer',\n                        transition: 'all 0.2s'\n                      }}\n                      onMouseOver={(e) => {\n                        e.currentTarget.style.backgroundColor = '#D2691E';\n                        e.currentTarget.style.color = 'white';\n                      }}\n                      onMouseOut={(e) => {\n                        e.currentTarget.style.backgroundColor = 'transparent';\n                        e.currentTarget.style.color = '#D2691E';\n                      }}\n                    >\n                      Cancel\n                    </button>\n                  </div>\n                </form>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n\n      <style>{`\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n      `}</style>\n    </div>\n  );\n};\n\nexport default UnifiedBookDetailsModal;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}