{"ast":null,"code":"var _jsxFileName = \"/Users/cluckbucks/projects/booknexus-social/frontend/src/components/UnifiedBookDetailsModal.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Close as CloseIcon, Star as StarIcon, StarBorder as StarBorderIcon, StarHalf as StarHalfIcon, Send as SendIcon, MenuBook as MenuBookIcon } from '@mui/icons-material';\nimport { GoogleBookFeedbackService } from '../app/services/services/GoogleBookFeedbackService';\nimport { useAuth } from '../hooks/useAuth';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst UnifiedBookDetailsModal = ({\n  book,\n  isOpen,\n  onClose,\n  context = 'discovery',\n  existingUserRating,\n  existingUserReview,\n  userBookListData\n}) => {\n  _s();\n  const {\n    isLoggedIn\n  } = useAuth();\n  const [rating, setRating] = useState(0);\n  const [review, setReview] = useState('');\n  const [submitting, setSubmitting] = useState(false);\n  const [error, setError] = useState(null);\n  const [success, setSuccess] = useState(false);\n  const [showReviewForm, setShowReviewForm] = useState(false);\n  const [existingFeedback, setExistingFeedback] = useState(null);\n  const [progress, setProgress] = useState(0);\n  const [isUpdatingProgress, setIsUpdatingProgress] = useState(false);\n  const [progressError, setProgressError] = useState(null);\n  const [progressSuccess, setProgressSuccess] = useState(false);\n  useEffect(() => {\n    if (book && isOpen) {\n      // Load existing user feedback if provided\n      setRating(existingUserRating || 0);\n      setReview(existingUserReview || '');\n      if (isLoggedIn) {\n        loadExistingFeedback();\n      }\n    }\n  }, [book, isOpen, isLoggedIn, existingUserRating, existingUserReview]);\n  const loadExistingFeedback = async () => {\n    if (!(book !== null && book !== void 0 && book.googleBookId)) return;\n    try {\n      // You might want to add an API to get user's existing feedback\n      // For now, use the provided existing feedback\n      setExistingFeedback({\n        rating: existingUserRating,\n        review: existingUserReview\n      });\n    } catch (error) {\n      console.error('Failed to load existing feedback:', error);\n    }\n  };\n  const handleSubmitReview = async e => {\n    e.preventDefault();\n    if (!book || rating === 0 || !review.trim()) return;\n    setSubmitting(true);\n    setError(null);\n    setSuccess(false);\n    try {\n      await GoogleBookFeedbackService.saveFeedback({\n        googleBookId: book.googleBookId,\n        bookTitle: book.title,\n        authorName: book.authorName,\n        rating: rating,\n        review: review\n      });\n      setSuccess(true);\n      setRating(0);\n      setReview('');\n      setShowReviewForm(false);\n      // Reload existing feedback\n      setTimeout(() => {\n        loadExistingFeedback();\n        setSuccess(false);\n      }, 1500);\n    } catch (err) {\n      setError((err === null || err === void 0 ? void 0 : err.message) || 'Failed to submit review');\n    } finally {\n      setSubmitting(false);\n    }\n  };\n  const renderStars = (rating, interactive = false, size = '18px') => {\n    const stars = [];\n    for (let i = 1; i <= 5; i++) {\n      let starIcon;\n      if (i <= rating) {\n        starIcon = /*#__PURE__*/_jsxDEV(StarIcon, {\n          style: {\n            color: '#FFD700',\n            fontSize: size\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 20\n        }, this);\n      } else if (i - 0.5 <= rating) {\n        starIcon = /*#__PURE__*/_jsxDEV(StarHalfIcon, {\n          style: {\n            color: '#FFD700',\n            fontSize: size\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 20\n        }, this);\n      } else {\n        starIcon = /*#__PURE__*/_jsxDEV(StarBorderIcon, {\n          style: {\n            color: '#D3D3D3',\n            fontSize: size\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 20\n        }, this);\n      }\n      stars.push(/*#__PURE__*/_jsxDEV(\"span\", {\n        style: {\n          cursor: interactive ? 'pointer' : 'default',\n          transition: 'transform 0.1s'\n        },\n        onMouseOver: e => {\n          if (interactive) {\n            e.currentTarget.style.transform = 'scale(1.1)';\n          }\n        },\n        onMouseOut: e => {\n          if (interactive) {\n            e.currentTarget.style.transform = 'scale(1)';\n          }\n        },\n        onClick: e => {\n          if (interactive) {\n            const rect = e.currentTarget.getBoundingClientRect();\n            const clickX = e.clientX - rect.left;\n            const starWidth = rect.width;\n            if (clickX < starWidth / 2) {\n              setRating(i - 0.5);\n            } else {\n              setRating(i);\n            }\n          }\n        },\n        children: starIcon\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }, this));\n    }\n    return stars;\n  };\n  const truncateDescription = (text, maxLength = 500) => {\n    if (text.length <= maxLength) return text;\n    return text.substring(0, maxLength) + '...';\n  };\n  if (!isOpen || !book) return null;\n  const modalOverlayStyle = {\n    position: 'fixed',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    backgroundColor: 'rgba(0, 0, 0, 0.7)',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    zIndex: 1000,\n    padding: '20px'\n  };\n  const modalContentStyle = {\n    backgroundColor: 'rgba(255, 255, 255, 0.95)',\n    backdropFilter: 'blur(10px)',\n    borderRadius: '16px',\n    maxWidth: '700px',\n    width: '100%',\n    maxHeight: '90vh',\n    overflow: 'auto',\n    boxShadow: '0 20px 40px rgba(0, 0, 0, 0.3)',\n    border: '1px solid rgba(230, 215, 195, 0.3)',\n    position: 'relative'\n  };\n  const headerStyle = {\n    background: 'linear-gradient(135deg, #8B4513, #A0522D)',\n    color: '#FFF8DC',\n    padding: '24px',\n    borderRadius: '16px 16px 0 0',\n    position: 'relative'\n  };\n  const closeButtonStyle = {\n    position: 'absolute',\n    top: '12px',\n    right: '12px',\n    background: 'rgba(255, 255, 255, 0.2)',\n    border: 'none',\n    borderRadius: '50%',\n    width: '32px',\n    height: '32px',\n    cursor: 'pointer',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    color: '#FFF8DC',\n    fontSize: '18px',\n    transition: 'all 0.2s ease'\n  };\n  const bodyStyle = {\n    padding: '24px',\n    color: '#4B3F3A'\n  };\n  const buttonStyle = {\n    backgroundColor: '#D2691E',\n    color: 'white',\n    border: 'none',\n    borderRadius: '8px',\n    padding: '12px 24px',\n    fontSize: '14px',\n    fontWeight: 500,\n    cursor: 'pointer',\n    transition: 'background-color 0.2s',\n    marginRight: '12px',\n    marginBottom: '12px'\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: modalOverlayStyle,\n    onClick: onClose,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: modalContentStyle,\n      onClick: e => e.stopPropagation(),\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: headerStyle,\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          style: closeButtonStyle,\n          onClick: onClose,\n          onMouseOver: e => e.currentTarget.style.backgroundColor = 'rgba(255, 255, 255, 0.3)',\n          onMouseOut: e => e.currentTarget.style.backgroundColor = 'rgba(255, 255, 255, 0.2)',\n          children: /*#__PURE__*/_jsxDEV(CloseIcon, {\n            style: {\n              fontSize: '18px'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          style: {\n            margin: '0 40px 8px 0',\n            fontSize: '24px',\n            lineHeight: '1.3'\n          },\n          children: book.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            margin: '0',\n            fontSize: '16px',\n            opacity: 0.9\n          },\n          children: [\"by \", book.authorName]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: bodyStyle,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            gap: '24px',\n            marginBottom: '24px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              flexShrink: 0\n            },\n            children: book.cover ? /*#__PURE__*/_jsxDEV(\"img\", {\n              src: book.cover,\n              alt: book.title,\n              style: {\n                width: '120px',\n                height: '180px',\n                objectFit: 'cover',\n                borderRadius: '8px',\n                boxShadow: '0 4px 12px rgba(0, 0, 0, 0.2)'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 260,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                width: '120px',\n                height: '180px',\n                background: 'linear-gradient(135deg, #F4E3C1, #E6D7C3)',\n                borderRadius: '8px',\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                boxShadow: '0 4px 12px rgba(0, 0, 0, 0.2)'\n              },\n              children: /*#__PURE__*/_jsxDEV(MenuBookIcon, {\n                style: {\n                  color: '#8B7355',\n                  fontSize: '48px'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 282,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 272,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 258,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              flex: 1\n            },\n            children: [book.averageRating > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginBottom: '12px',\n                display: 'flex',\n                alignItems: 'center',\n                gap: '8px'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: 'flex'\n                },\n                children: renderStars(book.averageRating)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 291,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  fontSize: '14px',\n                  color: '#666'\n                },\n                children: [book.averageRating.toFixed(1), \" (\", book.ratingsCount || 0, \" ratings)\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 294,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 290,\n              columnNumber: 17\n            }, this), book.publishedDate && /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                margin: '8px 0',\n                fontSize: '14px'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Published:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 302,\n                columnNumber: 19\n              }, this), \" \", book.publishedDate]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 301,\n              columnNumber: 17\n            }, this), book.pageCount && /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                margin: '8px 0',\n                fontSize: '14px'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Pages:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 308,\n                columnNumber: 19\n              }, this), \" \", book.pageCount.toLocaleString()]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 307,\n              columnNumber: 17\n            }, this), book.categories && Array.isArray(book.categories) && book.categories.length > 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                margin: '8px 0',\n                fontSize: '14px'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Categories:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 314,\n                columnNumber: 19\n              }, this), \" \", book.categories.join(', ')]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 313,\n              columnNumber: 17\n            }, this), book.isbn && /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                margin: '8px 0',\n                fontSize: '14px'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"ISBN:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 320,\n                columnNumber: 19\n              }, this), \" \", book.isbn]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 319,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 288,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 11\n        }, this), book.synopsis && book.synopsis !== 'No description available.' && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: '24px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            style: {\n              marginBottom: '12px',\n              color: '#8B4513',\n              fontSize: '18px'\n            },\n            children: \"Description\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 329,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              lineHeight: '1.6',\n              margin: '0',\n              fontSize: '14px',\n              color: '#555'\n            },\n            children: truncateDescription(book.synopsis)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 332,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 13\n        }, this), isLoggedIn && existingFeedback && (existingFeedback.rating || existingFeedback.review) && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            borderTop: '1px solid #E6D7C3',\n            paddingTop: '24px',\n            marginBottom: '24px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            style: {\n              marginBottom: '16px',\n              color: '#8B4513',\n              fontSize: '18px'\n            },\n            children: \"Your Review\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 346,\n            columnNumber: 15\n          }, this), existingFeedback.rating && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginBottom: '12px',\n              display: 'flex',\n              alignItems: 'center',\n              gap: '8px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                fontSize: '14px',\n                color: '#666',\n                marginRight: '8px'\n              },\n              children: \"Your Rating:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 352,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex'\n              },\n              children: renderStars(existingFeedback.rating)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 353,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                fontSize: '14px',\n                color: '#666'\n              },\n              children: [existingFeedback.rating, \"/5\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 356,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 351,\n            columnNumber: 17\n          }, this), existingFeedback.review && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              backgroundColor: '#F9F7F4',\n              padding: '16px',\n              borderRadius: '8px',\n              border: '1px solid #E6D7C3',\n              marginBottom: '16px'\n            },\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                fontSize: '14px',\n                lineHeight: '1.6',\n                color: '#4B3F30',\n                margin: 0\n              },\n              children: [\"\\\"\", existingFeedback.review, \"\\\"\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 370,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 363,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            style: {\n              backgroundColor: 'transparent',\n              color: '#D2691E',\n              border: '1px solid #D2691E',\n              borderRadius: '8px',\n              padding: '8px 16px',\n              fontSize: '14px',\n              fontWeight: 500,\n              cursor: 'pointer',\n              transition: 'all 0.2s'\n            },\n            onMouseOver: e => {\n              e.currentTarget.style.backgroundColor = '#D2691E';\n              e.currentTarget.style.color = 'white';\n            },\n            onMouseOut: e => {\n              e.currentTarget.style.backgroundColor = 'transparent';\n              e.currentTarget.style.color = '#D2691E';\n            },\n            onClick: () => {\n              setShowReviewForm(true);\n              setRating(existingFeedback.rating || 0);\n              setReview(existingFeedback.review || '');\n            },\n            children: \"Edit Review\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 381,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 345,\n          columnNumber: 13\n        }, this), isLoggedIn && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            borderTop: '1px solid #E6D7C3',\n            paddingTop: '24px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            style: {\n              marginBottom: '16px',\n              color: '#8B4513',\n              fontSize: '18px'\n            },\n            children: existingFeedback && (existingFeedback.rating || existingFeedback.review) ? 'Update Review' : 'Rate & Review'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 415,\n            columnNumber: 15\n          }, this), !showReviewForm ? /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              style: buttonStyle,\n              onMouseOver: e => e.currentTarget.style.backgroundColor = '#B85A1A',\n              onMouseOut: e => e.currentTarget.style.backgroundColor = '#D2691E',\n              onClick: () => setShowReviewForm(true),\n              children: \"Write a Review\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 421,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 420,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: handleSubmitReview,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginBottom: '20px'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: {\n                  display: 'block',\n                  color: '#4B3F30',\n                  fontSize: '16px',\n                  fontWeight: 500,\n                  marginBottom: '12px'\n                },\n                children: \"Your Rating *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 434,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: '8px'\n                },\n                children: [renderStars(rating, true, '24px'), /*#__PURE__*/_jsxDEV(\"span\", {\n                  style: {\n                    color: '#6A5E4D',\n                    fontSize: '14px',\n                    marginLeft: '8px'\n                  },\n                  children: rating > 0 ? `${rating} out of 5` : 'Select rating'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 445,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 443,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 433,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginBottom: '24px'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: {\n                  display: 'block',\n                  color: '#4B3F30',\n                  fontSize: '16px',\n                  fontWeight: 500,\n                  marginBottom: '12px'\n                },\n                children: \"Your Review *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 453,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                value: review,\n                onChange: e => setReview(e.target.value),\n                placeholder: \"Share your thoughts about this book...\",\n                style: {\n                  width: '100%',\n                  padding: '12px',\n                  border: '1px solid #E6D7C3',\n                  borderRadius: '8px',\n                  fontSize: '14px',\n                  fontFamily: 'inherit',\n                  backgroundColor: 'rgba(255, 255, 255, 0.8)',\n                  resize: 'vertical',\n                  minHeight: '100px'\n                },\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 462,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 452,\n              columnNumber: 19\n            }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                backgroundColor: '#FEE2E2',\n                color: '#DC2626',\n                padding: '12px',\n                borderRadius: '8px',\n                marginBottom: '16px',\n                fontSize: '14px'\n              },\n              children: error\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 483,\n              columnNumber: 21\n            }, this), success && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                backgroundColor: '#D1FAE5',\n                color: '#065F46',\n                padding: '12px',\n                borderRadius: '8px',\n                marginBottom: '16px',\n                fontSize: '14px'\n              },\n              children: \"Review submitted successfully!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 496,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                gap: '12px'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                style: {\n                  ...buttonStyle,\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: '8px'\n                },\n                disabled: submitting || rating === 0 || !review.trim(),\n                onMouseOver: e => {\n                  if (!submitting && rating > 0 && review.trim()) {\n                    e.currentTarget.style.backgroundColor = '#B85A1A';\n                  }\n                },\n                onMouseOut: e => {\n                  if (!submitting && rating > 0 && review.trim()) {\n                    e.currentTarget.style.backgroundColor = '#D2691E';\n                  }\n                },\n                children: submitting ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      width: '16px',\n                      height: '16px',\n                      border: '2px solid transparent',\n                      borderTop: '2px solid white',\n                      borderRadius: '50%',\n                      animation: 'spin 1s linear infinite'\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 532,\n                    columnNumber: 27\n                  }, this), \"Submitting...\"]\n                }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(SendIcon, {\n                    style: {\n                      fontSize: '16px'\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 544,\n                    columnNumber: 27\n                  }, this), \"Submit Review\"]\n                }, void 0, true)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 510,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: () => {\n                  setShowReviewForm(false);\n                  setRating(0);\n                  setReview('');\n                  setError(null);\n                },\n                style: {\n                  backgroundColor: 'transparent',\n                  color: '#D2691E',\n                  border: '1px solid #D2691E',\n                  borderRadius: '8px',\n                  padding: '12px 24px',\n                  fontSize: '14px',\n                  fontWeight: 500,\n                  cursor: 'pointer',\n                  transition: 'all 0.2s'\n                },\n                onMouseOver: e => {\n                  e.currentTarget.style.backgroundColor = '#D2691E';\n                  e.currentTarget.style.color = 'white';\n                },\n                onMouseOut: e => {\n                  e.currentTarget.style.backgroundColor = 'transparent';\n                  e.currentTarget.style.color = '#D2691E';\n                },\n                children: \"Cancel\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 550,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 509,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 431,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 414,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"style\", {\n      children: `\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n      `\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 588,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 236,\n    columnNumber: 5\n  }, this);\n};\n_s(UnifiedBookDetailsModal, \"ktuer+4d8/AeyhwetminvWqmVGo=\", false, function () {\n  return [useAuth];\n});\n_c = UnifiedBookDetailsModal;\nexport default UnifiedBookDetailsModal;\nvar _c;\n$RefreshReg$(_c, \"UnifiedBookDetailsModal\");","map":{"version":3,"names":["React","useState","useEffect","Close","CloseIcon","Star","StarIcon","StarBorder","StarBorderIcon","StarHalf","StarHalfIcon","Send","SendIcon","MenuBook","MenuBookIcon","GoogleBookFeedbackService","useAuth","jsxDEV","_jsxDEV","Fragment","_Fragment","UnifiedBookDetailsModal","book","isOpen","onClose","context","existingUserRating","existingUserReview","userBookListData","_s","isLoggedIn","rating","setRating","review","setReview","submitting","setSubmitting","error","setError","success","setSuccess","showReviewForm","setShowReviewForm","existingFeedback","setExistingFeedback","progress","setProgress","isUpdatingProgress","setIsUpdatingProgress","progressError","setProgressError","progressSuccess","setProgressSuccess","loadExistingFeedback","googleBookId","console","handleSubmitReview","e","preventDefault","trim","saveFeedback","bookTitle","title","authorName","setTimeout","err","message","renderStars","interactive","size","stars","i","starIcon","style","color","fontSize","fileName","_jsxFileName","lineNumber","columnNumber","push","cursor","transition","onMouseOver","currentTarget","transform","onMouseOut","onClick","rect","getBoundingClientRect","clickX","clientX","left","starWidth","width","children","truncateDescription","text","maxLength","length","substring","modalOverlayStyle","position","top","right","bottom","backgroundColor","display","alignItems","justifyContent","zIndex","padding","modalContentStyle","backdropFilter","borderRadius","maxWidth","maxHeight","overflow","boxShadow","border","headerStyle","background","closeButtonStyle","height","bodyStyle","buttonStyle","fontWeight","marginRight","marginBottom","stopPropagation","margin","lineHeight","opacity","gap","flexShrink","cover","src","alt","objectFit","flex","averageRating","toFixed","ratingsCount","publishedDate","pageCount","toLocaleString","categories","Array","isArray","join","isbn","synopsis","borderTop","paddingTop","onSubmit","marginLeft","value","onChange","target","placeholder","fontFamily","resize","minHeight","required","type","disabled","animation","_c","$RefreshReg$"],"sources":["/Users/cluckbucks/projects/booknexus-social/frontend/src/components/UnifiedBookDetailsModal.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport {\n  Close as CloseIcon,\n  Star as StarIcon,\n  StarBorder as StarBorderIcon,\n  StarHalf as StarHalfIcon,\n  Send as SendIcon,\n  MenuBook as MenuBookIcon\n} from '@mui/icons-material';\nimport { GoogleBook } from '../hooks/useGoogleBooksSimple';\nimport { GoogleBookFeedbackService } from '../app/services/services/GoogleBookFeedbackService';\nimport { UserBookListService } from '../app/services/services/UserBookListService';\nimport { useAuth } from '../hooks/useAuth';\n\ninterface UnifiedBookDetailsModalProps {\n  book: GoogleBook | null;\n  isOpen: boolean;\n  onClose: () => void;\n  context?: 'discovery' | 'library'; // To show different action buttons\n  existingUserRating?: number;\n  existingUserReview?: string;\n  userBookListData?: any; // Full UserBookList object for progress and other data\n}\n\nconst UnifiedBookDetailsModal: React.FC<UnifiedBookDetailsModalProps> = ({\n  book,\n  isOpen,\n  onClose,\n  context = 'discovery',\n  existingUserRating,\n  existingUserReview,\n  userBookListData\n}) => {\n  const { isLoggedIn } = useAuth();\n  const [rating, setRating] = useState<number>(0);\n  const [review, setReview] = useState<string>('');\n  const [submitting, setSubmitting] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [success, setSuccess] = useState(false);\n  const [showReviewForm, setShowReviewForm] = useState(false);\n  const [existingFeedback, setExistingFeedback] = useState<any>(null);\n  const [progress, setProgress] = useState<number>(0);\n  const [isUpdatingProgress, setIsUpdatingProgress] = useState(false);\n  const [progressError, setProgressError] = useState<string | null>(null);\n  const [progressSuccess, setProgressSuccess] = useState(false);\n\n  useEffect(() => {\n    if (book && isOpen) {\n      // Load existing user feedback if provided\n      setRating(existingUserRating || 0);\n      setReview(existingUserReview || '');\n      \n      if (isLoggedIn) {\n        loadExistingFeedback();\n      }\n    }\n  }, [book, isOpen, isLoggedIn, existingUserRating, existingUserReview]);\n\n  const loadExistingFeedback = async () => {\n    if (!book?.googleBookId) return;\n    \n    try {\n      // You might want to add an API to get user's existing feedback\n      // For now, use the provided existing feedback\n      setExistingFeedback({\n        rating: existingUserRating,\n        review: existingUserReview\n      });\n    } catch (error) {\n      console.error('Failed to load existing feedback:', error);\n    }\n  };\n\n  const handleSubmitReview = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!book || rating === 0 || !review.trim()) return;\n\n    setSubmitting(true);\n    setError(null);\n    setSuccess(false);\n\n    try {\n      await GoogleBookFeedbackService.saveFeedback({\n        googleBookId: book.googleBookId,\n        bookTitle: book.title,\n        authorName: book.authorName,\n        rating: rating,\n        review: review\n      });\n      setSuccess(true);\n      setRating(0);\n      setReview('');\n      setShowReviewForm(false);\n      // Reload existing feedback\n      setTimeout(() => {\n        loadExistingFeedback();\n        setSuccess(false);\n      }, 1500);\n    } catch (err: any) {\n      setError(err?.message || 'Failed to submit review');\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  const renderStars = (rating: number, interactive: boolean = false, size: string = '18px') => {\n    const stars = [];\n    for (let i = 1; i <= 5; i++) {\n      let starIcon;\n      if (i <= rating) {\n        starIcon = <StarIcon style={{ color: '#FFD700', fontSize: size }} />;\n      } else if (i - 0.5 <= rating) {\n        starIcon = <StarHalfIcon style={{ color: '#FFD700', fontSize: size }} />;\n      } else {\n        starIcon = <StarBorderIcon style={{ color: '#D3D3D3', fontSize: size }} />;\n      }\n\n      stars.push(\n        <span\n          key={i}\n          style={{\n            cursor: interactive ? 'pointer' : 'default',\n            transition: 'transform 0.1s'\n          }}\n          onMouseOver={(e) => {\n            if (interactive) {\n              e.currentTarget.style.transform = 'scale(1.1)';\n            }\n          }}\n          onMouseOut={(e) => {\n            if (interactive) {\n              e.currentTarget.style.transform = 'scale(1)';\n            }\n          }}\n          onClick={(e) => {\n            if (interactive) {\n              const rect = e.currentTarget.getBoundingClientRect();\n              const clickX = e.clientX - rect.left;\n              const starWidth = rect.width;\n              \n              if (clickX < starWidth / 2) {\n                setRating(i - 0.5);\n              } else {\n                setRating(i);\n              }\n            }\n          }}\n        >\n          {starIcon}\n        </span>\n      );\n    }\n    return stars;\n  };\n\n  const truncateDescription = (text: string, maxLength: number = 500) => {\n    if (text.length <= maxLength) return text;\n    return text.substring(0, maxLength) + '...';\n  };\n\n  if (!isOpen || !book) return null;\n\n  const modalOverlayStyle: React.CSSProperties = {\n    position: 'fixed',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    backgroundColor: 'rgba(0, 0, 0, 0.7)',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    zIndex: 1000,\n    padding: '20px'\n  };\n\n  const modalContentStyle: React.CSSProperties = {\n    backgroundColor: 'rgba(255, 255, 255, 0.95)',\n    backdropFilter: 'blur(10px)',\n    borderRadius: '16px',\n    maxWidth: '700px',\n    width: '100%',\n    maxHeight: '90vh',\n    overflow: 'auto',\n    boxShadow: '0 20px 40px rgba(0, 0, 0, 0.3)',\n    border: '1px solid rgba(230, 215, 195, 0.3)',\n    position: 'relative'\n  };\n\n  const headerStyle: React.CSSProperties = {\n    background: 'linear-gradient(135deg, #8B4513, #A0522D)',\n    color: '#FFF8DC',\n    padding: '24px',\n    borderRadius: '16px 16px 0 0',\n    position: 'relative'\n  };\n\n  const closeButtonStyle: React.CSSProperties = {\n    position: 'absolute',\n    top: '12px',\n    right: '12px',\n    background: 'rgba(255, 255, 255, 0.2)',\n    border: 'none',\n    borderRadius: '50%',\n    width: '32px',\n    height: '32px',\n    cursor: 'pointer',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    color: '#FFF8DC',\n    fontSize: '18px',\n    transition: 'all 0.2s ease'\n  };\n\n  const bodyStyle: React.CSSProperties = {\n    padding: '24px',\n    color: '#4B3F3A'\n  };\n\n  const buttonStyle: React.CSSProperties = {\n    backgroundColor: '#D2691E',\n    color: 'white',\n    border: 'none',\n    borderRadius: '8px',\n    padding: '12px 24px',\n    fontSize: '14px',\n    fontWeight: 500,\n    cursor: 'pointer',\n    transition: 'background-color 0.2s',\n    marginRight: '12px',\n    marginBottom: '12px'\n  };\n\n  return (\n    <div style={modalOverlayStyle} onClick={onClose}>\n      <div style={modalContentStyle} onClick={(e) => e.stopPropagation()}>\n        <div style={headerStyle}>\n          <button \n            style={closeButtonStyle}\n            onClick={onClose}\n            onMouseOver={(e) => e.currentTarget.style.backgroundColor = 'rgba(255, 255, 255, 0.3)'}\n            onMouseOut={(e) => e.currentTarget.style.backgroundColor = 'rgba(255, 255, 255, 0.2)'}\n          >\n            <CloseIcon style={{ fontSize: '18px' }} />\n          </button>\n          <h2 style={{ margin: '0 40px 8px 0', fontSize: '24px', lineHeight: '1.3' }}>\n            {book.title}\n          </h2>\n          <p style={{ margin: '0', fontSize: '16px', opacity: 0.9 }}>\n            by {book.authorName}\n          </p>\n        </div>\n        \n        <div style={bodyStyle}>\n          <div style={{ display: 'flex', gap: '24px', marginBottom: '24px' }}>\n            {/* Book Cover */}\n            <div style={{ flexShrink: 0 }}>\n              {book.cover ? (\n                <img\n                  src={book.cover}\n                  alt={book.title}\n                  style={{\n                    width: '120px',\n                    height: '180px',\n                    objectFit: 'cover',\n                    borderRadius: '8px',\n                    boxShadow: '0 4px 12px rgba(0, 0, 0, 0.2)'\n                  }}\n                />\n              ) : (\n                <div style={{\n                  width: '120px',\n                  height: '180px',\n                  background: 'linear-gradient(135deg, #F4E3C1, #E6D7C3)',\n                  borderRadius: '8px',\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                  boxShadow: '0 4px 12px rgba(0, 0, 0, 0.2)'\n                }}>\n                  <MenuBookIcon style={{ color: '#8B7355', fontSize: '48px' }} />\n                </div>\n              )}\n            </div>\n            \n            {/* Book Info */}\n            <div style={{ flex: 1 }}>\n              {book.averageRating > 0 && (\n                <div style={{ marginBottom: '12px', display: 'flex', alignItems: 'center', gap: '8px' }}>\n                  <div style={{ display: 'flex' }}>\n                    {renderStars(book.averageRating)}\n                  </div>\n                  <span style={{ fontSize: '14px', color: '#666' }}>\n                    {book.averageRating.toFixed(1)} ({book.ratingsCount || 0} ratings)\n                  </span>\n                </div>\n              )}\n              \n              {book.publishedDate && (\n                <p style={{ margin: '8px 0', fontSize: '14px' }}>\n                  <strong>Published:</strong> {book.publishedDate}\n                </p>\n              )}\n              \n              {book.pageCount && (\n                <p style={{ margin: '8px 0', fontSize: '14px' }}>\n                  <strong>Pages:</strong> {book.pageCount.toLocaleString()}\n                </p>\n              )}\n              \n              {book.categories && Array.isArray(book.categories) && book.categories.length > 0 && (\n                <p style={{ margin: '8px 0', fontSize: '14px' }}>\n                  <strong>Categories:</strong> {book.categories.join(', ')}\n                </p>\n              )}\n              \n              {book.isbn && (\n                <p style={{ margin: '8px 0', fontSize: '14px' }}>\n                  <strong>ISBN:</strong> {book.isbn}\n                </p>\n              )}\n            </div>\n          </div>\n          \n          {/* Description */}\n          {book.synopsis && book.synopsis !== 'No description available.' && (\n            <div style={{ marginBottom: '24px' }}>\n              <h3 style={{ marginBottom: '12px', color: '#8B4513', fontSize: '18px' }}>\n                Description\n              </h3>\n              <p style={{ \n                lineHeight: '1.6', \n                margin: '0',\n                fontSize: '14px',\n                color: '#555'\n              }}>\n                {truncateDescription(book.synopsis)}\n              </p>\n            </div>\n          )}\n\n          {/* Existing User Review */}\n          {isLoggedIn && existingFeedback && (existingFeedback.rating || existingFeedback.review) && (\n            <div style={{ borderTop: '1px solid #E6D7C3', paddingTop: '24px', marginBottom: '24px' }}>\n              <h3 style={{ marginBottom: '16px', color: '#8B4513', fontSize: '18px' }}>\n                Your Review\n              </h3>\n              \n              {existingFeedback.rating && (\n                <div style={{ marginBottom: '12px', display: 'flex', alignItems: 'center', gap: '8px' }}>\n                  <span style={{ fontSize: '14px', color: '#666', marginRight: '8px' }}>Your Rating:</span>\n                  <div style={{ display: 'flex' }}>\n                    {renderStars(existingFeedback.rating)}\n                  </div>\n                  <span style={{ fontSize: '14px', color: '#666' }}>\n                    {existingFeedback.rating}/5\n                  </span>\n                </div>\n              )}\n              \n              {existingFeedback.review && (\n                <div style={{\n                  backgroundColor: '#F9F7F4',\n                  padding: '16px',\n                  borderRadius: '8px',\n                  border: '1px solid #E6D7C3',\n                  marginBottom: '16px'\n                }}>\n                  <p style={{\n                    fontSize: '14px',\n                    lineHeight: '1.6',\n                    color: '#4B3F30',\n                    margin: 0\n                  }}>\n                    \"{existingFeedback.review}\"\n                  </p>\n                </div>\n              )}\n              \n              <button\n                style={{\n                  backgroundColor: 'transparent',\n                  color: '#D2691E',\n                  border: '1px solid #D2691E',\n                  borderRadius: '8px',\n                  padding: '8px 16px',\n                  fontSize: '14px',\n                  fontWeight: 500,\n                  cursor: 'pointer',\n                  transition: 'all 0.2s'\n                }}\n                onMouseOver={(e) => {\n                  e.currentTarget.style.backgroundColor = '#D2691E';\n                  e.currentTarget.style.color = 'white';\n                }}\n                onMouseOut={(e) => {\n                  e.currentTarget.style.backgroundColor = 'transparent';\n                  e.currentTarget.style.color = '#D2691E';\n                }}\n                onClick={() => {\n                  setShowReviewForm(true);\n                  setRating(existingFeedback.rating || 0);\n                  setReview(existingFeedback.review || '');\n                }}\n              >\n                Edit Review\n              </button>\n            </div>\n          )}\n\n          {/* Review Section */}\n          {isLoggedIn && (\n            <div style={{ borderTop: '1px solid #E6D7C3', paddingTop: '24px' }}>\n              <h3 style={{ marginBottom: '16px', color: '#8B4513', fontSize: '18px' }}>\n                {existingFeedback && (existingFeedback.rating || existingFeedback.review) ? 'Update Review' : 'Rate & Review'}\n              </h3>\n              \n              {!showReviewForm ? (\n                <div>\n                  <button\n                    style={buttonStyle}\n                    onMouseOver={(e) => e.currentTarget.style.backgroundColor = '#B85A1A'}\n                    onMouseOut={(e) => e.currentTarget.style.backgroundColor = '#D2691E'}\n                    onClick={() => setShowReviewForm(true)}\n                  >\n                    Write a Review\n                  </button>\n                </div>\n              ) : (\n                <form onSubmit={handleSubmitReview}>\n                  {/* Rating */}\n                  <div style={{ marginBottom: '20px' }}>\n                    <label style={{\n                      display: 'block',\n                      color: '#4B3F30',\n                      fontSize: '16px',\n                      fontWeight: 500,\n                      marginBottom: '12px'\n                    }}>\n                      Your Rating *\n                    </label>\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\n                      {renderStars(rating, true, '24px')}\n                      <span style={{ color: '#6A5E4D', fontSize: '14px', marginLeft: '8px' }}>\n                        {rating > 0 ? `${rating} out of 5` : 'Select rating'}\n                      </span>\n                    </div>\n                  </div>\n\n                  {/* Review Text */}\n                  <div style={{ marginBottom: '24px' }}>\n                    <label style={{\n                      display: 'block',\n                      color: '#4B3F30',\n                      fontSize: '16px',\n                      fontWeight: 500,\n                      marginBottom: '12px'\n                    }}>\n                      Your Review *\n                    </label>\n                    <textarea\n                      value={review}\n                      onChange={(e) => setReview(e.target.value)}\n                      placeholder=\"Share your thoughts about this book...\"\n                      style={{\n                        width: '100%',\n                        padding: '12px',\n                        border: '1px solid #E6D7C3',\n                        borderRadius: '8px',\n                        fontSize: '14px',\n                        fontFamily: 'inherit',\n                        backgroundColor: 'rgba(255, 255, 255, 0.8)',\n                        resize: 'vertical',\n                        minHeight: '100px'\n                      }}\n                      required\n                    />\n                  </div>\n\n                  {/* Error/Success Messages */}\n                  {error && (\n                    <div style={{\n                      backgroundColor: '#FEE2E2',\n                      color: '#DC2626',\n                      padding: '12px',\n                      borderRadius: '8px',\n                      marginBottom: '16px',\n                      fontSize: '14px'\n                    }}>\n                      {error}\n                    </div>\n                  )}\n\n                  {success && (\n                    <div style={{\n                      backgroundColor: '#D1FAE5',\n                      color: '#065F46',\n                      padding: '12px',\n                      borderRadius: '8px',\n                      marginBottom: '16px',\n                      fontSize: '14px'\n                    }}>\n                      Review submitted successfully!\n                    </div>\n                  )}\n\n                  {/* Form Buttons */}\n                  <div style={{ display: 'flex', gap: '12px' }}>\n                    <button\n                      type=\"submit\"\n                      style={{\n                        ...buttonStyle,\n                        display: 'flex',\n                        alignItems: 'center',\n                        gap: '8px'\n                      }}\n                      disabled={submitting || rating === 0 || !review.trim()}\n                      onMouseOver={(e) => {\n                        if (!submitting && rating > 0 && review.trim()) {\n                          e.currentTarget.style.backgroundColor = '#B85A1A';\n                        }\n                      }}\n                      onMouseOut={(e) => {\n                        if (!submitting && rating > 0 && review.trim()) {\n                          e.currentTarget.style.backgroundColor = '#D2691E';\n                        }\n                      }}\n                    >\n                      {submitting ? (\n                        <>\n                          <div style={{\n                            width: '16px',\n                            height: '16px',\n                            border: '2px solid transparent',\n                            borderTop: '2px solid white',\n                            borderRadius: '50%',\n                            animation: 'spin 1s linear infinite'\n                          }} />\n                          Submitting...\n                        </>\n                      ) : (\n                        <>\n                          <SendIcon style={{ fontSize: '16px' }} />\n                          Submit Review\n                        </>\n                      )}\n                    </button>\n                    \n                    <button\n                      type=\"button\"\n                      onClick={() => {\n                        setShowReviewForm(false);\n                        setRating(0);\n                        setReview('');\n                        setError(null);\n                      }}\n                      style={{\n                        backgroundColor: 'transparent',\n                        color: '#D2691E',\n                        border: '1px solid #D2691E',\n                        borderRadius: '8px',\n                        padding: '12px 24px',\n                        fontSize: '14px',\n                        fontWeight: 500,\n                        cursor: 'pointer',\n                        transition: 'all 0.2s'\n                      }}\n                      onMouseOver={(e) => {\n                        e.currentTarget.style.backgroundColor = '#D2691E';\n                        e.currentTarget.style.color = 'white';\n                      }}\n                      onMouseOut={(e) => {\n                        e.currentTarget.style.backgroundColor = 'transparent';\n                        e.currentTarget.style.color = '#D2691E';\n                      }}\n                    >\n                      Cancel\n                    </button>\n                  </div>\n                </form>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n\n      <style>{`\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n      `}</style>\n    </div>\n  );\n};\n\nexport default UnifiedBookDetailsModal;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}