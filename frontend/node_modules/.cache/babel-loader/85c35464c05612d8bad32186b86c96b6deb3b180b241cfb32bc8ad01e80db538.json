{"ast":null,"code":"import{Alert,Box,CircularProgress,Container,Typography}from'@mui/material';import React,{useEffect,useState}from'react';import{useParams}from'react-router-dom';import{BookService}from'../app/services/services/BookService';import BookActions from'../components/BookActions';import BookFeedback from'../components/BookFeedback';import{tokenService}from'../services/tokenService';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const BookDetailPage=()=>{const{id}=useParams();const[book,setBook]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);// Get current user info\nconst currentUser=tokenService.getUser();const isOwner=!!(book&&currentUser&&book.owner===currentUser.name);// Placeholder logic for status\nconst isBorrowed=false;// TODO: Replace with real logic\nconst canApproveReturn=false;// TODO: Replace with real logic\nconst isRead=false;// TODO: Replace with real logic - could be determined from read books list\nuseEffect(()=>{if(!id)return;setLoading(true);BookService.findBookById(Number(id)).then(setBook).catch(setError).finally(()=>setLoading(false));},[id]);if(loading)return/*#__PURE__*/_jsx(Container,{sx:{mt:4},children:/*#__PURE__*/_jsx(CircularProgress,{})});if(error)return/*#__PURE__*/_jsx(Container,{sx:{mt:4},children:/*#__PURE__*/_jsx(Alert,{severity:\"error\",children:error.message||String(error)})});if(!book)return/*#__PURE__*/_jsx(Container,{sx:{mt:4},children:/*#__PURE__*/_jsx(Alert,{severity:\"info\",children:\"Book not found.\"})});return/*#__PURE__*/_jsxs(Container,{maxWidth:\"sm\",sx:{mt:4},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",gutterBottom:true,children:book.title}),/*#__PURE__*/_jsxs(Typography,{variant:\"subtitle1\",gutterBottom:true,children:[\"by \",book.authorName]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body1\",gutterBottom:true,children:[\"ISBN: \",book.isbn]}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",gutterBottom:true,children:book.synopsis}),/*#__PURE__*/_jsx(Box,{sx:{mt:2},children:/*#__PURE__*/_jsx(BookActions,{bookId:book.id,isBorrowed:isBorrowed,canApproveReturn:canApproveReturn,isOwner:isOwner,isRead:isRead})}),/*#__PURE__*/_jsx(BookFeedback,{bookId:book.id})]});};export default BookDetailPage;","map":{"version":3,"names":["Alert","Box","CircularProgress","Container","Typography","React","useEffect","useState","useParams","BookService","BookActions","BookFeedback","tokenService","jsx","_jsx","jsxs","_jsxs","BookDetailPage","id","book","setBook","loading","setLoading","error","setError","currentUser","getUser","isOwner","owner","name","isBorrowed","canApproveReturn","isRead","findBookById","Number","then","catch","finally","sx","mt","children","severity","message","String","maxWidth","variant","gutterBottom","title","authorName","isbn","synopsis","bookId"],"sources":["/Users/rahildesai/Projects/BookNexus/frontend/src/pages/BookDetailPage.tsx"],"sourcesContent":["import { Alert, Box, CircularProgress, Container, Typography } from '@mui/material';\nimport React, { useEffect, useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport type { BookResponse } from '../app/services/models/BookResponse';\nimport { BookService } from '../app/services/services/BookService';\nimport BookActions from '../components/BookActions';\nimport BookFeedback from '../components/BookFeedback';\nimport { tokenService } from '../services/tokenService';\n\nconst BookDetailPage: React.FC = () => {\n  const { id } = useParams<{ id: string }>();\n  const [book, setBook] = useState<BookResponse | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<any>(null);\n\n  // Get current user info\n  const currentUser = tokenService.getUser();\n  const isOwner = !!(book && currentUser && book.owner === currentUser.name);\n  \n  // Placeholder logic for status\n  const isBorrowed = false; // TODO: Replace with real logic\n  const canApproveReturn = false; // TODO: Replace with real logic\n  const isRead = false; // TODO: Replace with real logic - could be determined from read books list\n\n  useEffect(() => {\n    if (!id) return;\n    setLoading(true);\n    BookService.findBookById(Number(id))\n      .then(setBook)\n      .catch(setError)\n      .finally(() => setLoading(false));\n  }, [id]);\n\n  if (loading) return <Container sx={{ mt: 4 }}><CircularProgress /></Container>;\n  if (error) return <Container sx={{ mt: 4 }}><Alert severity=\"error\">{error.message || String(error)}</Alert></Container>;\n  if (!book) return <Container sx={{ mt: 4 }}><Alert severity=\"info\">Book not found.</Alert></Container>;\n\n  return (\n    <Container maxWidth=\"sm\" sx={{ mt: 4 }}>\n      <Typography variant=\"h4\" gutterBottom>{book.title}</Typography>\n      <Typography variant=\"subtitle1\" gutterBottom>by {book.authorName}</Typography>\n      <Typography variant=\"body1\" gutterBottom>ISBN: {book.isbn}</Typography>\n      <Typography variant=\"body2\" gutterBottom>{book.synopsis}</Typography>\n      <Box sx={{ mt: 2 }}>\n        <BookActions \n          bookId={book.id!} \n          isBorrowed={isBorrowed} \n          canApproveReturn={canApproveReturn}\n          isOwner={isOwner}\n          isRead={isRead}\n        />\n      </Box>\n      <BookFeedback bookId={book.id!} />\n    </Container>\n  );\n};\n\nexport default BookDetailPage; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}