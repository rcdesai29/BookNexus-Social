{"ast":null,"code":"import _objectSpread from\"/Users/cluckbucks/projects/booknexus-social/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useCallback}from'react';import{useNavigate,useSearchParams}from'react-router-dom';import{CircularProgress,Alert}from'@mui/material';import{Search as SearchIcon,Clear as ClearIcon,Book as BookIcon}from'@mui/icons-material';import GoogleBookCard from'../components/GoogleBookCard';import GoogleBookReviewModal from'../components/GoogleBookReviewModal';import{GoogleBooksService}from'../app/services/services/GoogleBooksService';import{GoogleBookFeedbackService}from'../app/services/services/GoogleBookFeedbackService';import{BookService}from'../app/services/services/BookService';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const SearchPage=()=>{const navigate=useNavigate();const[searchParams,setSearchParams]=useSearchParams();const query=searchParams.get('q')||'';// State for search\nconst[searchTerm,setSearchTerm]=useState(query);const[isSearching,setIsSearching]=useState(false);const[searchError,setSearchError]=useState(null);// State for results\nconst[localBooks,setLocalBooks]=useState([]);const[googleBooks,setGoogleBooks]=useState([]);const[combinedResults,setCombinedResults]=useState([]);// Modal state\nconst[selectedBook,setSelectedBook]=useState(null);const[isReviewModalOpen,setIsReviewModalOpen]=useState(false);// Search function\nconst performSearch=useCallback(async searchQuery=>{if(!searchQuery.trim()){setLocalBooks([]);setGoogleBooks([]);setCombinedResults([]);return;}setIsSearching(true);setSearchError(null);try{var _localResults$content;// Search local database\nconst localResults=await BookService.findAllBooks(0,50);const filteredLocalBooks=((_localResults$content=localResults.content)===null||_localResults$content===void 0?void 0:_localResults$content.filter(book=>{var _book$title,_book$authorName,_book$isbn;return((_book$title=book.title)===null||_book$title===void 0?void 0:_book$title.toLowerCase().includes(searchQuery.toLowerCase()))||((_book$authorName=book.authorName)===null||_book$authorName===void 0?void 0:_book$authorName.toLowerCase().includes(searchQuery.toLowerCase()))||((_book$isbn=book.isbn)===null||_book$isbn===void 0?void 0:_book$isbn.includes(searchQuery));}))||[];// Search Google Books API\nconst googleResults=await GoogleBooksService.searchBooks(searchQuery,20);const convertedGoogleBooks=(googleResults.items||[]).map(book=>GoogleBooksService.convertGoogleBookToBookFormat(book));// Filter Google Books to avoid duplicates and low-quality results\nconst filteredGoogleBooks=convertedGoogleBooks.filter(book=>{// Remove books with very low rating counts\nif(book.ratingsCount>0&&book.ratingsCount<10)return false;// Check if this Google Book is already in local database\nconst isDuplicate=filteredLocalBooks.some(localBook=>{var _localBook$title,_book$title2,_localBook$authorName,_book$authorName2;return localBook.isbn===book.isbn&&book.isbn!==''||((_localBook$title=localBook.title)===null||_localBook$title===void 0?void 0:_localBook$title.toLowerCase())===((_book$title2=book.title)===null||_book$title2===void 0?void 0:_book$title2.toLowerCase())&&((_localBook$authorName=localBook.authorName)===null||_localBook$authorName===void 0?void 0:_localBook$authorName.toLowerCase())===((_book$authorName2=book.authorName)===null||_book$authorName2===void 0?void 0:_book$authorName2.toLowerCase());});return!isDuplicate;});setLocalBooks(filteredLocalBooks);setGoogleBooks(filteredGoogleBooks);// Combine and sort results\nconst combined=[...filteredLocalBooks.map(book=>_objectSpread(_objectSpread({},book),{},{source:'local'})),...filteredGoogleBooks.map(book=>_objectSpread(_objectSpread({},book),{},{source:'google'}))];// Sort by relevance (exact matches first, then partial matches)\nconst sortedResults=combined.sort((a,b)=>{var _a$title,_b$title;const aTitle=((_a$title=a.title)===null||_a$title===void 0?void 0:_a$title.toLowerCase())||'';const bTitle=((_b$title=b.title)===null||_b$title===void 0?void 0:_b$title.toLowerCase())||'';const searchLower=searchQuery.toLowerCase();// Exact title match gets highest priority\nif(aTitle===searchLower&&bTitle!==searchLower)return-1;if(bTitle===searchLower&&aTitle!==searchLower)return 1;// Starts with search term gets second priority\nif(aTitle.startsWith(searchLower)&&!bTitle.startsWith(searchLower))return-1;if(bTitle.startsWith(searchLower)&&!aTitle.startsWith(searchLower))return 1;// Higher ratings get priority\nif(a.averageRating&&b.averageRating){return b.averageRating-a.averageRating;}// Local books get priority over Google books\nif(a.source==='local'&&b.source==='google')return-1;if(b.source==='local'&&a.source==='google')return 1;return 0;});setCombinedResults(sortedResults);}catch(error){setSearchError((error===null||error===void 0?void 0:error.message)||'Search failed');console.error('Search error:',error);}finally{setIsSearching(false);}},[]);// Handle search input\nconst handleSearch=e=>{e.preventDefault();if(searchTerm.trim()){setSearchParams({q:searchTerm.trim()});performSearch(searchTerm.trim());}};// Handle search on query change\nuseEffect(()=>{if(query){setSearchTerm(query);performSearch(query);}},[query,performSearch]);// Review modal handlers\nconst handleReviewClick=book=>{setSelectedBook(book);setIsReviewModalOpen(true);};const handleCloseReviewModal=()=>{setIsReviewModalOpen(false);setSelectedBook(null);};const handleSubmitReview=async(bookId,rating,review)=>{if(!selectedBook)return;try{await GoogleBookFeedbackService.saveFeedback({googleBookId:bookId,bookTitle:selectedBook.title,authorName:selectedBook.authorName,rating:rating,review:review});}catch(error){console.error('Failed to save review:',error);throw error;}};// Render book card based on source\nconst renderBookCard=book=>{if(book.source==='google'){return/*#__PURE__*/_jsx(GoogleBookCard,{book:book,showRating:true,showReviewButton:true,onReviewClick:handleReviewClick},book.googleBookId);}else{// Local book card\nreturn/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:'rgba(255, 255, 255, 0.8)',backdropFilter:'blur(10px)',padding:'16px',borderRadius:'12px',border:'1px solid #E6D7C3',boxShadow:'0 4px 12px rgba(75, 63, 48, 0.1)',cursor:'pointer',transition:'all 0.3s ease',height:'100%'},onMouseOver:e=>{e.currentTarget.style.transform='translateY(-4px)';e.currentTarget.style.boxShadow='0 8px 25px rgba(75, 63, 48, 0.15)';},onMouseOut:e=>{e.currentTarget.style.transform='translateY(0)';e.currentTarget.style.boxShadow='0 4px 12px rgba(75, 63, 48, 0.1)';},onClick:()=>navigate(\"/books/\".concat(book.id)),children:[book.cover?/*#__PURE__*/_jsx(\"img\",{src:typeof book.cover==='string'&&book.cover.startsWith('http')?\"http://localhost:8088/api/v1/books/cover/\".concat(book.id):\"data:image/jpeg;base64,\".concat(book.cover),alt:book.title,style:{width:'100%',height:'192px',objectFit:'cover',borderRadius:'8px',marginBottom:'16px'}}):/*#__PURE__*/_jsx(\"div\",{style:{width:'100%',height:'192px',background:'linear-gradient(135deg, #F4E3C1, #E6D7C3)',display:'flex',alignItems:'center',justifyContent:'center',borderRadius:'8px',marginBottom:'16px'},children:/*#__PURE__*/_jsx(BookIcon,{style:{color:'#8B7355',fontSize:'48px'}})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{style:{fontFamily:'Playfair Display, serif',fontSize:'14px',fontWeight:600,color:'#4B3F30',marginBottom:'8px',lineHeight:1.3,overflow:'hidden',textOverflow:'ellipsis',display:'-webkit-box',WebkitLineClamp:2,WebkitBoxOrient:'vertical'},children:book.title}),/*#__PURE__*/_jsxs(\"p\",{style:{color:'#6A5E4D',marginBottom:'12px',fontSize:'12px',overflow:'hidden',textOverflow:'ellipsis',whiteSpace:'nowrap'},children:[\"by \",book.authorName]}),/*#__PURE__*/_jsx(\"div\",{style:{backgroundColor:'#D2691E',color:'white',padding:'4px 8px',borderRadius:'4px',fontSize:'10px',fontWeight:500,display:'inline-block'},children:\"In Library\"})]})]},book.id);}};return/*#__PURE__*/_jsxs(\"div\",{style:{minHeight:'100vh',backgroundColor:'#FAF3E3'},children:[/*#__PURE__*/_jsx(\"div\",{style:{background:'linear-gradient(90deg, #4B3F30, #5D4A33, #4B3F30)',color:'white',padding:'48px 0',textAlign:'center'},children:/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:'1200px',margin:'0 auto',padding:'0 24px'},children:[/*#__PURE__*/_jsx(\"h1\",{style:{fontFamily:'Playfair Display, serif',fontSize:'36px',fontWeight:700,marginBottom:'16px'},children:\"Search Books\"}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:'18px',color:'rgba(255, 255, 255, 0.9)',maxWidth:'600px',margin:'0 auto'},children:\"Find books in our library and discover new ones from around the world\"})]})}),/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:'1200px',margin:'0 auto',padding:'48px 24px'},children:[/*#__PURE__*/_jsx(\"form\",{onSubmit:handleSearch,style:{marginBottom:'48px'},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'16px',maxWidth:'600px',margin:'0 auto'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:1,position:'relative'},children:[/*#__PURE__*/_jsx(SearchIcon,{style:{position:'absolute',left:'16px',top:'50%',transform:'translateY(-50%)',color:'#8B7355',fontSize:'20px'}}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),placeholder:\"Search by title, author, or ISBN...\",style:{width:'100%',padding:'16px 16px 16px 48px',border:'1px solid #E6D7C3',borderRadius:'12px',fontSize:'16px',backgroundColor:'rgba(255, 255, 255, 0.9)',color:'#4B3F30',outline:'none',transition:'all 0.2s'},onFocus:e=>{e.target.style.borderColor='#D2691E';e.target.style.boxShadow='0 0 0 3px rgba(210, 105, 30, 0.1)';},onBlur:e=>{e.target.style.borderColor='#E6D7C3';e.target.style.boxShadow='none';}}),searchTerm&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setSearchTerm('');setSearchParams({});},style:{position:'absolute',right:'16px',top:'50%',transform:'translateY(-50%)',background:'none',border:'none',cursor:'pointer',color:'#8B7355'},children:/*#__PURE__*/_jsx(ClearIcon,{})})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:isSearching||!searchTerm.trim(),style:{backgroundColor:'#D2691E',color:'white',border:'none',borderRadius:'12px',padding:'16px 32px',fontSize:'16px',fontWeight:500,cursor:'pointer',transition:'background-color 0.2s',display:'flex',alignItems:'center',gap:'8px'},onMouseOver:e=>{if(!isSearching&&searchTerm.trim()){e.currentTarget.style.backgroundColor='#B85A1A';}},onMouseOut:e=>{if(!isSearching&&searchTerm.trim()){e.currentTarget.style.backgroundColor='#D2691E';}},children:isSearching?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(CircularProgress,{size:16,sx:{color:'white'}}),\"Searching...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(SearchIcon,{}),\"Search\"]})})]})}),searchError&&/*#__PURE__*/_jsx(Alert,{severity:\"error\",style:{marginBottom:'32px'},children:searchError}),query&&!isSearching&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:'24px'},children:[/*#__PURE__*/_jsxs(\"h2\",{style:{fontFamily:'Playfair Display, serif',fontSize:'24px',fontWeight:600,color:'#4B3F30'},children:[\"Search Results for \\\"\",query,\"\\\"\"]}),/*#__PURE__*/_jsxs(\"div\",{style:{color:'#6A5E4D',fontSize:'14px'},children:[combinedResults.length,\" book\",combinedResults.length!==1?'s':'',\" found\"]})]}),combinedResults.length>0?/*#__PURE__*/_jsx(\"div\",{style:{display:'grid',gridTemplateColumns:'repeat(auto-fill, minmax(200px, 1fr))',gap:'24px'},children:combinedResults.map(renderBookCard)}):/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:'rgba(255, 255, 255, 0.8)',backdropFilter:'blur(10px)',padding:'48px',borderRadius:'16px',border:'1px solid #E6D7C3',textAlign:'center'},children:[/*#__PURE__*/_jsx(BookIcon,{style:{color:'#D2691E',fontSize:'64px',marginBottom:'16px'}}),/*#__PURE__*/_jsx(\"h3\",{style:{fontFamily:'Playfair Display, serif',fontSize:'20px',fontWeight:600,color:'#4B3F30',marginBottom:'8px'},children:\"No books found\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:'#6A5E4D'},children:\"Try searching with different keywords or check the spelling\"})]})]}),!query&&/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:'rgba(255, 255, 255, 0.8)',backdropFilter:'blur(10px)',padding:'32px',borderRadius:'16px',border:'1px solid #E6D7C3'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{fontFamily:'Playfair Display, serif',fontSize:'20px',fontWeight:600,color:'#4B3F30',marginBottom:'16px'},children:\"Search Tips\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'repeat(auto-fit, minmax(250px, 1fr))',gap:'16px'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{style:{color:'#4B3F30',marginBottom:'8px'},children:\"\\uD83D\\uDCDA Search by Title\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:'#6A5E4D',fontSize:'14px'},children:\"Try partial titles like \\\"red rising\\\" to find \\\"Red Rising\\\" and related books\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{style:{color:'#4B3F30',marginBottom:'8px'},children:\"\\u270D\\uFE0F Search by Author\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:'#6A5E4D',fontSize:'14px'},children:\"Find all books by your favorite authors\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{style:{color:'#4B3F30',marginBottom:'8px'},children:\"\\uD83D\\uDD0D Search by ISBN\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:'#6A5E4D',fontSize:'14px'},children:\"Use ISBN numbers for exact book matches\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{style:{color:'#4B3F30',marginBottom:'8px'},children:\"\\uD83C\\uDF0D Global Search\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:'#6A5E4D',fontSize:'14px'},children:\"Results include both our library and books from around the world\"})]})]})]})]}),/*#__PURE__*/_jsx(GoogleBookReviewModal,{book:selectedBook,isOpen:isReviewModalOpen,onClose:handleCloseReviewModal,onSubmitReview:handleSubmitReview})]});};export default SearchPage;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useNavigate","useSearchParams","CircularProgress","Alert","Search","SearchIcon","Clear","ClearIcon","Book","BookIcon","GoogleBookCard","GoogleBookReviewModal","GoogleBooksService","GoogleBookFeedbackService","BookService","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","SearchPage","navigate","searchParams","setSearchParams","query","get","searchTerm","setSearchTerm","isSearching","setIsSearching","searchError","setSearchError","localBooks","setLocalBooks","googleBooks","setGoogleBooks","combinedResults","setCombinedResults","selectedBook","setSelectedBook","isReviewModalOpen","setIsReviewModalOpen","performSearch","searchQuery","trim","_localResults$content","localResults","findAllBooks","filteredLocalBooks","content","filter","book","_book$title","_book$authorName","_book$isbn","title","toLowerCase","includes","authorName","isbn","googleResults","searchBooks","convertedGoogleBooks","items","map","convertGoogleBookToBookFormat","filteredGoogleBooks","ratingsCount","isDuplicate","some","localBook","_localBook$title","_book$title2","_localBook$authorName","_book$authorName2","combined","_objectSpread","source","sortedResults","sort","a","b","_a$title","_b$title","aTitle","bTitle","searchLower","startsWith","averageRating","error","message","console","handleSearch","e","preventDefault","q","handleReviewClick","handleCloseReviewModal","handleSubmitReview","bookId","rating","review","saveFeedback","googleBookId","bookTitle","renderBookCard","showRating","showReviewButton","onReviewClick","style","backgroundColor","backdropFilter","padding","borderRadius","border","boxShadow","cursor","transition","height","onMouseOver","currentTarget","transform","onMouseOut","onClick","concat","id","children","cover","src","alt","width","objectFit","marginBottom","background","display","alignItems","justifyContent","color","fontSize","fontFamily","fontWeight","lineHeight","overflow","textOverflow","WebkitLineClamp","WebkitBoxOrient","whiteSpace","minHeight","textAlign","maxWidth","margin","onSubmit","gap","flex","position","left","top","type","value","onChange","target","placeholder","outline","onFocus","borderColor","onBlur","right","disabled","size","sx","severity","length","gridTemplateColumns","isOpen","onClose","onSubmitReview"],"sources":["/Users/cluckbucks/projects/booknexus-social/frontend/src/pages/SearchPage.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { useNavigate, useSearchParams } from 'react-router-dom';\nimport {\n  CircularProgress,\n  Alert\n} from '@mui/material';\nimport {\n  Search as SearchIcon,\n  Clear as ClearIcon,\n  Book as BookIcon,\n  TrendingUp as TrendingIcon\n} from '@mui/icons-material';\nimport GoogleBookCard from '../components/GoogleBookCard';\nimport GoogleBookReviewModal from '../components/GoogleBookReviewModal';\nimport { useBooks } from '../hooks/useBooks';\nimport { useGoogleBooks, GoogleBook } from '../hooks/useGoogleBooks';\nimport { GoogleBooksService } from '../app/services/services/GoogleBooksService';\nimport { GoogleBookFeedbackService } from '../app/services/services/GoogleBookFeedbackService';\nimport { BookService } from '../app/services/services/BookService';\n\nconst SearchPage: React.FC = () => {\n  const navigate = useNavigate();\n  const [searchParams, setSearchParams] = useSearchParams();\n  const query = searchParams.get('q') || '';\n  \n  // State for search\n  const [searchTerm, setSearchTerm] = useState(query);\n  const [isSearching, setIsSearching] = useState(false);\n  const [searchError, setSearchError] = useState<string | null>(null);\n  \n  // State for results\n  const [localBooks, setLocalBooks] = useState<any[]>([]);\n  const [googleBooks, setGoogleBooks] = useState<GoogleBook[]>([]);\n  const [combinedResults, setCombinedResults] = useState<any[]>([]);\n  \n  // Modal state\n  const [selectedBook, setSelectedBook] = useState<GoogleBook | null>(null);\n  const [isReviewModalOpen, setIsReviewModalOpen] = useState(false);\n\n  // Search function\n  const performSearch = useCallback(async (searchQuery: string) => {\n    if (!searchQuery.trim()) {\n      setLocalBooks([]);\n      setGoogleBooks([]);\n      setCombinedResults([]);\n      return;\n    }\n\n    setIsSearching(true);\n    setSearchError(null);\n\n    try {\n      // Search local database\n      const localResults = await BookService.findAllBooks(0, 50);\n      const filteredLocalBooks = localResults.content?.filter(book => \n        book.title?.toLowerCase().includes(searchQuery.toLowerCase()) ||\n        book.authorName?.toLowerCase().includes(searchQuery.toLowerCase()) ||\n        book.isbn?.includes(searchQuery)\n      ) || [];\n\n      // Search Google Books API\n      const googleResults = await GoogleBooksService.searchBooks(searchQuery, 20);\n      const convertedGoogleBooks = (googleResults.items || []).map(book => \n        GoogleBooksService.convertGoogleBookToBookFormat(book)\n      );\n\n      // Filter Google Books to avoid duplicates and low-quality results\n      const filteredGoogleBooks = convertedGoogleBooks.filter(book => {\n        // Remove books with very low rating counts\n        if (book.ratingsCount > 0 && book.ratingsCount < 10) return false;\n        \n        // Check if this Google Book is already in local database\n        const isDuplicate = filteredLocalBooks.some(localBook => \n          localBook.isbn === book.isbn && book.isbn !== '' ||\n          localBook.title?.toLowerCase() === book.title?.toLowerCase() &&\n          localBook.authorName?.toLowerCase() === book.authorName?.toLowerCase()\n        );\n        \n        return !isDuplicate;\n      });\n\n      setLocalBooks(filteredLocalBooks);\n      setGoogleBooks(filteredGoogleBooks);\n\n      // Combine and sort results\n      const combined = [\n        ...filteredLocalBooks.map(book => ({ ...book, source: 'local' })),\n        ...filteredGoogleBooks.map(book => ({ ...book, source: 'google' }))\n      ];\n\n      // Sort by relevance (exact matches first, then partial matches)\n      const sortedResults = combined.sort((a, b) => {\n        const aTitle = a.title?.toLowerCase() || '';\n        const bTitle = b.title?.toLowerCase() || '';\n        const searchLower = searchQuery.toLowerCase();\n        \n        // Exact title match gets highest priority\n        if (aTitle === searchLower && bTitle !== searchLower) return -1;\n        if (bTitle === searchLower && aTitle !== searchLower) return 1;\n        \n        // Starts with search term gets second priority\n        if (aTitle.startsWith(searchLower) && !bTitle.startsWith(searchLower)) return -1;\n        if (bTitle.startsWith(searchLower) && !aTitle.startsWith(searchLower)) return 1;\n        \n        // Higher ratings get priority\n        if (a.averageRating && b.averageRating) {\n          return b.averageRating - a.averageRating;\n        }\n        \n        // Local books get priority over Google books\n        if (a.source === 'local' && b.source === 'google') return -1;\n        if (b.source === 'local' && a.source === 'google') return 1;\n        \n        return 0;\n      });\n\n      setCombinedResults(sortedResults);\n\n    } catch (error: any) {\n      setSearchError(error?.message || 'Search failed');\n      console.error('Search error:', error);\n    } finally {\n      setIsSearching(false);\n    }\n  }, []);\n\n  // Handle search input\n  const handleSearch = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (searchTerm.trim()) {\n      setSearchParams({ q: searchTerm.trim() });\n      performSearch(searchTerm.trim());\n    }\n  };\n\n  // Handle search on query change\n  useEffect(() => {\n    if (query) {\n      setSearchTerm(query);\n      performSearch(query);\n    }\n  }, [query, performSearch]);\n\n  // Review modal handlers\n  const handleReviewClick = (book: GoogleBook) => {\n    setSelectedBook(book);\n    setIsReviewModalOpen(true);\n  };\n\n  const handleCloseReviewModal = () => {\n    setIsReviewModalOpen(false);\n    setSelectedBook(null);\n  };\n\n  const handleSubmitReview = async (bookId: string, rating: number, review: string) => {\n    if (!selectedBook) return;\n    \n    try {\n      await GoogleBookFeedbackService.saveFeedback({\n        googleBookId: bookId,\n        bookTitle: selectedBook.title,\n        authorName: selectedBook.authorName,\n        rating: rating,\n        review: review\n      });\n    } catch (error) {\n      console.error('Failed to save review:', error);\n      throw error;\n    }\n  };\n\n  // Render book card based on source\n  const renderBookCard = (book: any) => {\n    if (book.source === 'google') {\n      return (\n        <GoogleBookCard\n          key={book.googleBookId}\n          book={book}\n          showRating={true}\n          showReviewButton={true}\n          onReviewClick={handleReviewClick}\n        />\n      );\n    } else {\n      // Local book card\n      return (\n        <div\n          key={book.id}\n          style={{\n            backgroundColor: 'rgba(255, 255, 255, 0.8)',\n            backdropFilter: 'blur(10px)',\n            padding: '16px',\n            borderRadius: '12px',\n            border: '1px solid #E6D7C3',\n            boxShadow: '0 4px 12px rgba(75, 63, 48, 0.1)',\n            cursor: 'pointer',\n            transition: 'all 0.3s ease',\n            height: '100%'\n          }}\n          onMouseOver={(e) => {\n            e.currentTarget.style.transform = 'translateY(-4px)';\n            e.currentTarget.style.boxShadow = '0 8px 25px rgba(75, 63, 48, 0.15)';\n          }}\n          onMouseOut={(e) => {\n            e.currentTarget.style.transform = 'translateY(0)';\n            e.currentTarget.style.boxShadow = '0 4px 12px rgba(75, 63, 48, 0.1)';\n          }}\n          onClick={() => navigate(`/books/${book.id}`)}\n        >\n          {book.cover ? (\n            <img\n              src={typeof book.cover === 'string' && book.cover.startsWith('http') ? \n                   `http://localhost:8088/api/v1/books/cover/${book.id}` : \n                   `data:image/jpeg;base64,${book.cover}`}\n              alt={book.title}\n              style={{\n                width: '100%',\n                height: '192px',\n                objectFit: 'cover',\n                borderRadius: '8px',\n                marginBottom: '16px'\n              }}\n            />\n          ) : (\n            <div style={{\n              width: '100%',\n              height: '192px',\n              background: 'linear-gradient(135deg, #F4E3C1, #E6D7C3)',\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'center',\n              borderRadius: '8px',\n              marginBottom: '16px'\n            }}>\n              <BookIcon style={{ color: '#8B7355', fontSize: '48px' }} />\n            </div>\n          )}\n          \n          <div>\n            <h4 style={{\n              fontFamily: 'Playfair Display, serif',\n              fontSize: '14px',\n              fontWeight: 600,\n              color: '#4B3F30',\n              marginBottom: '8px',\n              lineHeight: 1.3,\n              overflow: 'hidden',\n              textOverflow: 'ellipsis',\n              display: '-webkit-box',\n              WebkitLineClamp: 2,\n              WebkitBoxOrient: 'vertical'\n            }}>\n              {book.title}\n            </h4>\n            <p style={{\n              color: '#6A5E4D',\n              marginBottom: '12px',\n              fontSize: '12px',\n              overflow: 'hidden',\n              textOverflow: 'ellipsis',\n              whiteSpace: 'nowrap'\n            }}>\n              by {book.authorName}\n            </p>\n            <div style={{\n              backgroundColor: '#D2691E',\n              color: 'white',\n              padding: '4px 8px',\n              borderRadius: '4px',\n              fontSize: '10px',\n              fontWeight: 500,\n              display: 'inline-block'\n            }}>\n              In Library\n            </div>\n          </div>\n        </div>\n      );\n    }\n  };\n\n  return (\n    <div style={{ minHeight: '100vh', backgroundColor: '#FAF3E3' }}>\n      {/* Header */}\n      <div style={{\n        background: 'linear-gradient(90deg, #4B3F30, #5D4A33, #4B3F30)',\n        color: 'white',\n        padding: '48px 0',\n        textAlign: 'center'\n      }}>\n        <div style={{ maxWidth: '1200px', margin: '0 auto', padding: '0 24px' }}>\n          <h1 style={{\n            fontFamily: 'Playfair Display, serif',\n            fontSize: '36px',\n            fontWeight: 700,\n            marginBottom: '16px'\n          }}>\n            Search Books\n          </h1>\n          <p style={{\n            fontSize: '18px',\n            color: 'rgba(255, 255, 255, 0.9)',\n            maxWidth: '600px',\n            margin: '0 auto'\n          }}>\n            Find books in our library and discover new ones from around the world\n          </p>\n        </div>\n      </div>\n\n      <div style={{ maxWidth: '1200px', margin: '0 auto', padding: '48px 24px' }}>\n        {/* Search Form */}\n        <form onSubmit={handleSearch} style={{ marginBottom: '48px' }}>\n          <div style={{\n            display: 'flex',\n            gap: '16px',\n            maxWidth: '600px',\n            margin: '0 auto'\n          }}>\n            <div style={{ flex: 1, position: 'relative' }}>\n              <SearchIcon style={{\n                position: 'absolute',\n                left: '16px',\n                top: '50%',\n                transform: 'translateY(-50%)',\n                color: '#8B7355',\n                fontSize: '20px'\n              }} />\n              <input\n                type=\"text\"\n                value={searchTerm}\n                onChange={(e) => setSearchTerm(e.target.value)}\n                placeholder=\"Search by title, author, or ISBN...\"\n                style={{\n                  width: '100%',\n                  padding: '16px 16px 16px 48px',\n                  border: '1px solid #E6D7C3',\n                  borderRadius: '12px',\n                  fontSize: '16px',\n                  backgroundColor: 'rgba(255, 255, 255, 0.9)',\n                  color: '#4B3F30',\n                  outline: 'none',\n                  transition: 'all 0.2s'\n                }}\n                onFocus={(e) => {\n                  e.target.style.borderColor = '#D2691E';\n                  e.target.style.boxShadow = '0 0 0 3px rgba(210, 105, 30, 0.1)';\n                }}\n                onBlur={(e) => {\n                  e.target.style.borderColor = '#E6D7C3';\n                  e.target.style.boxShadow = 'none';\n                }}\n              />\n              {searchTerm && (\n                <button\n                  type=\"button\"\n                  onClick={() => {\n                    setSearchTerm('');\n                    setSearchParams({});\n                  }}\n                  style={{\n                    position: 'absolute',\n                    right: '16px',\n                    top: '50%',\n                    transform: 'translateY(-50%)',\n                    background: 'none',\n                    border: 'none',\n                    cursor: 'pointer',\n                    color: '#8B7355'\n                  }}\n                >\n                  <ClearIcon />\n                </button>\n              )}\n            </div>\n            <button\n              type=\"submit\"\n              disabled={isSearching || !searchTerm.trim()}\n              style={{\n                backgroundColor: '#D2691E',\n                color: 'white',\n                border: 'none',\n                borderRadius: '12px',\n                padding: '16px 32px',\n                fontSize: '16px',\n                fontWeight: 500,\n                cursor: 'pointer',\n                transition: 'background-color 0.2s',\n                display: 'flex',\n                alignItems: 'center',\n                gap: '8px'\n              }}\n              onMouseOver={(e) => {\n                if (!isSearching && searchTerm.trim()) {\n                  e.currentTarget.style.backgroundColor = '#B85A1A';\n                }\n              }}\n              onMouseOut={(e) => {\n                if (!isSearching && searchTerm.trim()) {\n                  e.currentTarget.style.backgroundColor = '#D2691E';\n                }\n              }}\n            >\n              {isSearching ? (\n                <>\n                  <CircularProgress size={16} sx={{ color: 'white' }} />\n                  Searching...\n                </>\n              ) : (\n                <>\n                  <SearchIcon />\n                  Search\n                </>\n              )}\n            </button>\n          </div>\n        </form>\n\n        {/* Search Results */}\n        {searchError && (\n          <Alert severity=\"error\" style={{ marginBottom: '32px' }}>\n            {searchError}\n          </Alert>\n        )}\n\n        {query && !isSearching && (\n          <div>\n            <div style={{\n              display: 'flex',\n              justifyContent: 'space-between',\n              alignItems: 'center',\n              marginBottom: '24px'\n            }}>\n              <h2 style={{\n                fontFamily: 'Playfair Display, serif',\n                fontSize: '24px',\n                fontWeight: 600,\n                color: '#4B3F30'\n              }}>\n                Search Results for \"{query}\"\n              </h2>\n              <div style={{\n                color: '#6A5E4D',\n                fontSize: '14px'\n              }}>\n                {combinedResults.length} book{combinedResults.length !== 1 ? 's' : ''} found\n              </div>\n            </div>\n\n            {combinedResults.length > 0 ? (\n              <div style={{\n                display: 'grid',\n                gridTemplateColumns: 'repeat(auto-fill, minmax(200px, 1fr))',\n                gap: '24px'\n              }}>\n                {combinedResults.map(renderBookCard)}\n              </div>\n            ) : (\n              <div style={{\n                backgroundColor: 'rgba(255, 255, 255, 0.8)',\n                backdropFilter: 'blur(10px)',\n                padding: '48px',\n                borderRadius: '16px',\n                border: '1px solid #E6D7C3',\n                textAlign: 'center'\n              }}>\n                <BookIcon style={{ color: '#D2691E', fontSize: '64px', marginBottom: '16px' }} />\n                <h3 style={{\n                  fontFamily: 'Playfair Display, serif',\n                  fontSize: '20px',\n                  fontWeight: 600,\n                  color: '#4B3F30',\n                  marginBottom: '8px'\n                }}>\n                  No books found\n                </h3>\n                <p style={{ color: '#6A5E4D' }}>\n                  Try searching with different keywords or check the spelling\n                </p>\n              </div>\n            )}\n          </div>\n        )}\n\n        {/* Search Tips */}\n        {!query && (\n          <div style={{\n            backgroundColor: 'rgba(255, 255, 255, 0.8)',\n            backdropFilter: 'blur(10px)',\n            padding: '32px',\n            borderRadius: '16px',\n            border: '1px solid #E6D7C3'\n          }}>\n            <h3 style={{\n              fontFamily: 'Playfair Display, serif',\n              fontSize: '20px',\n              fontWeight: 600,\n              color: '#4B3F30',\n              marginBottom: '16px'\n            }}>\n              Search Tips\n            </h3>\n            <div style={{\n              display: 'grid',\n              gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))',\n              gap: '16px'\n            }}>\n              <div>\n                <h4 style={{ color: '#4B3F30', marginBottom: '8px' }}>üìö Search by Title</h4>\n                <p style={{ color: '#6A5E4D', fontSize: '14px' }}>\n                  Try partial titles like \"red rising\" to find \"Red Rising\" and related books\n                </p>\n              </div>\n              <div>\n                <h4 style={{ color: '#4B3F30', marginBottom: '8px' }}>‚úçÔ∏è Search by Author</h4>\n                <p style={{ color: '#6A5E4D', fontSize: '14px' }}>\n                  Find all books by your favorite authors\n                </p>\n              </div>\n              <div>\n                <h4 style={{ color: '#4B3F30', marginBottom: '8px' }}>üîç Search by ISBN</h4>\n                <p style={{ color: '#6A5E4D', fontSize: '14px' }}>\n                  Use ISBN numbers for exact book matches\n                </p>\n              </div>\n              <div>\n                <h4 style={{ color: '#4B3F30', marginBottom: '8px' }}>üåç Global Search</h4>\n                <p style={{ color: '#6A5E4D', fontSize: '14px' }}>\n                  Results include both our library and books from around the world\n                </p>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Google Book Review Modal */}\n      <GoogleBookReviewModal\n        book={selectedBook}\n        isOpen={isReviewModalOpen}\n        onClose={handleCloseReviewModal}\n        onSubmitReview={handleSubmitReview}\n      />\n    </div>\n  );\n};\n\nexport default SearchPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}